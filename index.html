<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÿ≠ÿßÿ∂ŸÜÿ© ÿßŸÑÿ£ÿ∑ŸÅÿßŸÑ ÿßŸÑÿ∞ŸÉŸäÿ© üë∂ Pro</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary: #667eea;
            --secondary: #764ba2;
            --success: #10b981;
            --danger: #ef4444;
            --warning: #f59e0b;
            --dark: #1f2937;
            --light: #f9fafb;
        }

        [data-theme="dark"] {
            --bg: #111827;
            --card-bg: #1f2937;
            --text: #f9fafb;
            --border: #374151;
        }

        [data-theme="light"] {
            --bg: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --card-bg: #ffffff;
            --text: #1f2937;
            --border: #e5e7eb;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--bg);
            color: var(--text);
            min-height: 100vh;
            transition: all 0.3s;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 20px;
        }

        /* ÿßŸÑŸáŸäÿØÿ± */
        .header {
            background: var(--card-bg);
            padding: 20px 30px;
            border-radius: 15px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .header-left h1 {
            font-size: 1.8em;
            color: var(--primary);
        }

        .header-right {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .theme-toggle {
            background: var(--primary);
            border: none;
            padding: 12px 20px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1.3em;
            transition: all 0.3s;
        }

        .theme-toggle:hover {
            transform: scale(1.1);
        }

        .status-badges {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .badge {
            padding: 6px 15px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: bold;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .badge-online { background: var(--success); color: white; }
        .badge-critical { background: var(--danger); color: white; }
        .badge-normal { background: var(--primary); color: white; }
        .badge-warning { background: var(--warning); color: white; }

        /* ÿßŸÑÿ™ÿ®ŸàŸäÿ®ÿßÿ™ */
        .tabs {
            background: var(--card-bg);
            padding: 10px;
            border-radius: 15px;
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            overflow-x: auto;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .tab {
            padding: 12px 25px;
            border-radius: 10px;
            cursor: pointer;
            border: none;
            background: transparent;
            color: var(--text);
            font-size: 1em;
            font-weight: 600;
            transition: all 0.3s;
            white-space: nowrap;
        }

        .tab:hover {
            background: rgba(102, 126, 234, 0.1);
        }

        .tab.active {
            background: var(--primary);
            color: white;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }

        /* ÿßŸÑŸÖÿ≠ÿ™ŸàŸâ */
        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.3s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* ÿßŸÑÿ¥ÿ®ŸÉÿ© */
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
        }

        .grid-2 {
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
        }

        /* ÿßŸÑÿ®ÿ∑ÿßŸÇÿ© */
        .card {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            transition: all 0.3s;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.12);
        }

        .card-title {
            font-size: 1.3em;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--primary);
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* ÿπÿ±ÿ∂ ÿßŸÑŸÇÿ±ÿßÿ°ÿßÿ™ */
        .sensor-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .sensor-item {
            background: var(--light);
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        [data-theme="dark"] .sensor-item {
            background: #374151;
        }

        .sensor-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
        }

        .sensor-icon {
            font-size: 2em;
            margin-bottom: 10px;
        }

        .sensor-value {
            font-size: 2.5em;
            font-weight: bold;
            color: var(--primary);
            margin: 10px 0;
            font-family: 'Courier New', monospace;
        }

        .sensor-label {
            font-size: 0.9em;
            opacity: 0.7;
            font-weight: 600;
        }

        .sensor-status {
            margin-top: 8px;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8em;
            font-weight: bold;
            display: inline-block;
        }

        .status-ok {
            background: rgba(16, 185, 129, 0.2);
            color: var(--success);
        }

        .status-alert {
            background: rgba(239, 68, 68, 0.2);
            color: var(--danger);
        }

        /* ÿßŸÑÿ≥ŸÑÿßŸäÿØÿ± */
        .slider-container {
            margin: 20px 0;
        }

        .slider-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .slider-value {
            color: var(--primary);
            font-weight: bold;
            font-size: 1.1em;
        }

        .slider {
            width: 100%;
            height: 8px;
            border-radius: 5px;
            background: #e5e7eb;
            outline: none;
            -webkit-appearance: none;
        }

        [data-theme="dark"] .slider {
            background: #4b5563;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
            transition: all 0.3s;
        }

        .slider::-webkit-slider-thumb:hover {
            transform: scale(1.2);
        }

        .slider::-moz-range-thumb {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            cursor: pointer;
            border: none;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        }

        /* ÿßŸÑÿ≠ÿßÿ∂ŸÜÿ© ÿßŸÑŸÖÿ±ÿ¶Ÿäÿ© */
        .incubator-visual {
            width: 100%;
            height: 300px;
            background: linear-gradient(to bottom, #e0f2fe 0%, #bae6fd 100%);
            border-radius: 20px;
            position: relative;
            overflow: hidden;
            border: 4px solid var(--primary);
            margin: 20px 0;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }

        [data-theme="dark"] .incubator-visual {
            background: linear-gradient(to bottom, #1e3a8a 0%, #1e40af 100%);
        }

        .baby-icon {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 6em;
            animation: breathe 3s ease-in-out infinite;
        }

        @keyframes breathe {
            0%, 100% { transform: translate(-50%, -50%) scale(1); }
            50% { transform: translate(-50%, -50%) scale(1.05); }
        }

        .incubator-overlay {
            position: absolute;
            top: 10px;
            left: 10px;
            right: 10px;
            display: flex;
            justify-content: space-between;
            font-size: 0.9em;
            padding: 10px;
            background: rgba(255,255,255,0.8);
            border-radius: 10px;
            backdrop-filter: blur(10px);
        }

        [data-theme="dark"] .incubator-overlay {
            background: rgba(31, 41, 55, 0.8);
        }

        /* ÿ£ÿ≤ÿ±ÿßÿ± ÿßŸÑÿ™ÿ≠ŸÉŸÖ */
        .control-buttons {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 20px;
        }

        .control-btn {
            padding: 15px 25px;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-size: 1em;
            font-weight: bold;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
        }

        .btn-success {
            background: var(--success);
            color: white;
        }

        .btn-danger {
            background: var(--danger);
            color: white;
        }

        .btn-warning {
            background: var(--warning);
            color: white;
        }

        .control-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.15);
        }

        .control-btn:active {
            transform: translateY(0);
        }

        /* ŸÖŸÅÿ™ÿßÿ≠ ÿßŸÑÿ™ÿ®ÿØŸäŸÑ */
        .switch-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background: var(--light);
            border-radius: 12px;
            margin: 10px 0;
        }

        [data-theme="dark"] .switch-container {
            background: #374151;
        }

        .switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 30px;
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .switch-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: 0.4s;
            border-radius: 30px;
        }

        .switch-slider:before {
            position: absolute;
            content: "";
            height: 22px;
            width: 22px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: 0.4s;
            border-radius: 50%;
        }

        input:checked + .switch-slider {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
        }

        input:checked + .switch-slider:before {
            transform: translateX(30px);
        }

        /* ÿßŸÑÿ±ÿ≥ŸàŸÖ ÿßŸÑÿ®ŸäÿßŸÜŸäÿ© */
        .chart-container {
            height: 300px;
            position: relative;
        }

        /* ÿßŸÑÿ™ŸÜÿ®ŸäŸáÿßÿ™ */
        .alerts-list {
            max-height: 400px;
            overflow-y: auto;
        }

        .alert-item {
            padding: 15px;
            margin: 10px 0;
            border-radius: 10px;
            border-right: 4px solid;
            display: flex;
            align-items: center;
            gap: 15px;
            animation: slideIn 0.5s;
        }

        @keyframes slideIn {
            from { 
                opacity: 0;
                transform: translateX(50px);
            }
            to { 
                opacity: 1;
                transform: translateX(0);
            }
        }

        .alert-info {
            background: rgba(59, 130, 246, 0.1);
            border-right-color: #3b82f6;
        }

        .alert-warning {
            background: rgba(245, 158, 11, 0.1);
            border-right-color: var(--warning);
        }

        .alert-danger {
            background: rgba(239, 68, 68, 0.1);
            border-right-color: var(--danger);
        }

        .alert-icon {
            font-size: 1.5em;
        }

        .alert-content {
            flex: 1;
        }

        .alert-time {
            font-size: 0.85em;
            opacity: 0.6;
        }

        /* ÿ≤ÿ± ÿßŸÑÿ∑Ÿàÿßÿ±ÿ¶ */
        .emergency-btn {
            position: fixed;
            bottom: 30px;
            left: 30px;
            width: 80px;
            height: 80px;
            border-radius: 50%;
            border: none;
            background: linear-gradient(135deg, var(--danger), #dc2626);
            color: white;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 8px 20px rgba(239, 68, 68, 0.4);
            transition: all 0.3s;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 5px;
            z-index: 999;
        }

        .emergency-btn:hover {
            transform: scale(1.15);
            box-shadow: 0 12px 30px rgba(239, 68, 68, 0.6);
        }

        .emergency-icon {
            font-size: 2em;
            animation: rotate 2s linear infinite;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        /* ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑŸÖÿ±Ÿäÿ∂ */
        .patient-info {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
        }

        .patient-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .patient-field {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .patient-label {
            font-size: 0.85em;
            opacity: 0.9;
        }

        .patient-value {
            font-size: 1.1em;
            font-weight: bold;
        }

        /* ŸÖŸÑÿßÿ≠ÿ∏ÿßÿ™ ÿßŸÑŸÖŸÖÿ±ÿ∂ÿßÿ™ */
        .notes-container {
            max-height: 500px;
            overflow-y: auto;
        }

        .note-item {
            background: var(--light);
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 15px;
            border-right: 4px solid var(--primary);
            transition: all 0.3s;
        }

        [data-theme="dark"] .note-item {
            background: #374151;
        }

        .note-item:hover {
            transform: translateX(-5px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .note-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border);
        }

        .note-nurse {
            font-weight: bold;
            color: var(--primary);
            font-size: 1.1em;
        }

        .note-time {
            font-size: 0.85em;
            opacity: 0.7;
        }

        .note-content {
            line-height: 1.6;
            margin: 10px 0;
        }

        .note-category {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 0.85em;
            font-weight: bold;
            margin-top: 10px;
        }

        .category-vital { background: rgba(239, 68, 68, 0.2); color: var(--danger); }
        .category-feeding { background: rgba(16, 185, 129, 0.2); color: var(--success); }
        .category-medication { background: rgba(245, 158, 11, 0.2); color: var(--warning); }
        .category-observation { background: rgba(59, 130, 246, 0.2); color: #3b82f6; }
        .category-general { background: rgba(102, 126, 234, 0.2); color: var(--primary); }

        .add-note-form {
            background: var(--light);
            padding: 25px;
            border-radius: 12px;
            margin-bottom: 20px;
        }

        [data-theme="dark"] .add-note-form {
            background: #374151;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--text);
        }

        .form-input,
        .form-textarea,
        .form-select {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid var(--border);
            border-radius: 10px;
            font-size: 1em;
            font-family: inherit;
            background: var(--card-bg);
            color: var(--text);
            transition: all 0.3s;
        }

        .form-input:focus,
        .form-textarea:focus,
        .form-select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .form-textarea {
            resize: vertical;
            min-height: 100px;
        }

        .note-actions {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
            margin-top: 10px;
        }

        .btn-small {
            padding: 6px 15px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9em;
            transition: all 0.3s;
        }

        .btn-edit {
            background: var(--warning);
            color: white;
        }

        .btn-delete {
            background: var(--danger);
            color: white;
        }

        .btn-small:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        /* ŸÇÿßÿπÿØÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ Ÿà Arduino */
        .connection-panel {
            background: var(--light);
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
        }

        [data-theme="dark"] .connection-panel {
            background: #374151;
        }

        .status-indicator {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 0.9em;
        }

        .status-connected {
            background: rgba(16, 185, 129, 0.2);
            color: var(--success);
        }

        .status-disconnected {
            background: rgba(239, 68, 68, 0.2);
            color: var(--danger);
        }

        .status-dot-animated {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: currentColor;
            animation: blink 1.5s ease-in-out infinite;
        }

        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }

        .db-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .db-stat-item {
            text-align: center;
            padding: 15px;
            background: var(--card-bg);
            border-radius: 10px;
            border: 2px solid var(--border);
        }

        .db-stat-value {
            font-size: 2em;
            font-weight: bold;
            color: var(--primary);
        }

        .db-stat-label {
            font-size: 0.9em;
            opacity: 0.7;
            margin-top: 5px;
        }

        .arduino-sensors {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .arduino-sensor-card {
            background: var(--card-bg);
            padding: 15px;
            border-radius: 10px;
            border: 2px solid var(--border);
            text-align: center;
        }

        .sensor-reading {
            font-size: 2em;
            font-weight: bold;
            color: var(--primary);
            margin: 10px 0;
        }

        .last-sync {
            font-size: 0.85em;
            opacity: 0.6;
            margin-top: 10px;
        }

        .input-group {
            margin-bottom: 15px;
        }

        .input-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
        }

        .input-field {
            width: 100%;
            padding: 12px;
            border: 2px solid var(--border);
            border-radius: 8px;
            font-size: 1em;
            background: var(--card-bg);
            color: var(--text);
        }

        .theme-preview {
            background: var(--light);
            border-radius: 12px;
            margin: 20px 0;
            padding: 20px;
            border: 3px dashed var(--primary);
        }

        [data-theme="dark"] .theme-preview {
            background: #374151;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .grid, .grid-2 {
                grid-template-columns: 1fr;
            }
            
            .sensor-grid {
                grid-template-columns: 1fr;
            }
            
            .header {
                flex-direction: column;
                text-align: center;
            }
            
            .emergency-btn {
                width: 60px;
                height: 60px;
                bottom: 15px;
                left: 15px;
            }
        }

        /* ÿ™ÿ£ÿ´Ÿäÿ±ÿßÿ™ ÿ•ÿ∂ÿßŸÅŸäÿ© */
        .glow {
            animation: glow 2s ease-in-out infinite;
        }

        @keyframes glow {
            0%, 100% {
                box-shadow: 0 0 5px rgba(102, 126, 234, 0.5);
            }
            50% {
                box-shadow: 0 0 20px rgba(102, 126, 234, 0.8);
            }
        }

        /* ŸÜÿ∏ÿßŸÖ ÿßŸÑÿ™ÿµŸàŸäÿ± ÿ´ŸÑÿßÿ´Ÿä ÿßŸÑÿ£ÿ®ÿπÿßÿØ */
        .d3-viewer-container {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            margin-bottom: 20px;
        }

        .d3-canvas {
            width: 100%;
            height: 600px;
            background: linear-gradient(to bottom, #87ceeb 0%, #e0f2fe 50%, #f0f0f0 100%);
            border-radius: 12px;
            position: relative;
            overflow: hidden;
            perspective: 1200px;
            border: 3px solid var(--primary);
            box-shadow: inset 0 0 100px rgba(0,0,0,0.1);
        }

        [data-theme="dark"] .d3-canvas {
            background: linear-gradient(to bottom, #0f172a 0%, #1e293b 50%, #334155 100%);
        }

        /* ÿ£ÿ±ÿ∂Ÿäÿ© ŸÖÿπ ÿ∏ŸÑ */
        .floor-shadow {
            position: absolute;
            bottom: 80px;
            left: 50%;
            transform: translateX(-50%);
            width: 450px;
            height: 80px;
            background: radial-gradient(ellipse at center, rgba(0,0,0,0.3) 0%, transparent 70%);
            border-radius: 50%;
            filter: blur(20px);
        }

        .incubator-3d {
            width: 420px;
            height: 400px;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotateX(20deg) rotateY(0deg);
            transform-style: preserve-3d;
            transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .incubator-3d:hover {
            transform: translate(-50%, -50%) rotateX(20deg) rotateY(25deg);
        }

        /* ÿßŸÑŸÇÿßÿπÿØÿ© ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿäÿ© */
        .incubator-base {
            width: 420px;
            height: 280px;
            position: absolute;
            bottom: 0;
            background: linear-gradient(145deg, #e8e8e8 0%, #d0d0d0 50%, #b8b8b8 100%);
            border-radius: 25px;
            box-shadow: 
                0 20px 60px rgba(0,0,0,0.4),
                inset 0 -2px 10px rgba(0,0,0,0.2),
                inset 0 2px 10px rgba(255,255,255,0.5);
            border: 5px solid #a0a0a0;
            transform: translateZ(-20px);
        }

        [data-theme="dark"] .incubator-base {
            background: linear-gradient(145deg, #3a3a3a 0%, #2a2a2a 50%, #1a1a1a 100%);
            border-color: #555;
        }

        /* ŸÑŸàÿ≠ÿ© ÿßŸÑÿ™ÿ≠ŸÉŸÖ */
        .base-panel {
            position: absolute;
            bottom: 20px;
            left: 20px;
            right: 20px;
            height: 60px;
            background: linear-gradient(to bottom, #2c3e50 0%, #34495e 100%);
            border-radius: 10px;
            box-shadow: 
                0 5px 15px rgba(0,0,0,0.3),
                inset 0 1px 3px rgba(255,255,255,0.1);
            display: flex;
            align-items: center;
            justify-content: space-around;
            padding: 0 15px;
        }

        .control-led {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            box-shadow: 0 0 10px currentColor, 0 0 20px currentColor;
            animation: blink-led 2s infinite;
        }

        .led-green { background: #00ff00; color: #00ff00; }
        .led-yellow { background: #ffff00; color: #ffff00; animation-delay: 0.5s; }
        .led-blue { background: #0080ff; color: #0080ff; animation-delay: 1s; }

        @keyframes blink-led {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }

        /* ÿßŸÑÿ∫ÿ∑ÿßÿ° ÿßŸÑÿ≤ÿ¨ÿßÿ¨Ÿä */
        .incubator-dome {
            width: 400px;
            height: 220px;
            position: absolute;
            top: 30px;
            left: 10px;
            background: linear-gradient(
                to bottom,
                rgba(180, 220, 255, 0.08) 0%,
                rgba(180, 220, 255, 0.12) 50%,
                rgba(180, 220, 255, 0.15) 100%
            );
            border-radius: 200px 200px 25px 25px;
            border: 4px solid rgba(100, 150, 200, 0.4);
            backdrop-filter: blur(1px);
            box-shadow: 
                inset 0 10px 30px rgba(255,255,255,0.3),
                inset 0 -10px 30px rgba(0,0,0,0.05),
                0 10px 40px rgba(0,0,0,0.2);
            transform: translateZ(10px);
            overflow: visible;
            z-index: 6;
        }

        /* ÿßŸÜÿπŸÉÿßÿ≥ÿßÿ™ ÿßŸÑÿ≤ÿ¨ÿßÿ¨ */
        .glass-reflection {
            position: absolute;
            top: 10px;
            left: 30px;
            width: 150px;
            height: 120px;
            background: linear-gradient(135deg, rgba(255,255,255,0.4) 0%, transparent 60%);
            border-radius: 50%;
            transform: rotate(-20deg);
            filter: blur(5px);
        }

        .glass-reflection-2 {
            position: absolute;
            bottom: 20px;
            right: 40px;
            width: 100px;
            height: 80px;
            background: linear-gradient(225deg, rgba(255,255,255,0.3) 0%, transparent 60%);
            border-radius: 50%;
            transform: rotate(15deg);
            filter: blur(3px);
        }

        /* ÿßŸÑÿ∑ŸÅŸÑ */
        .baby-3d {
            width: 120px;
            height: 120px;
            position: absolute;
            top: 55%;
            left: 50%;
            transform: translate(-50%, -50%) translateZ(5px);
            font-size: 100px;
            animation: breathe3d 3.5s ease-in-out infinite;
            filter: drop-shadow(0 8px 15px rgba(0,0,0,0.4));
            z-index: 5;
        }

        @keyframes breathe3d {
            0%, 100% { 
                transform: translate(-50%, -50%) translateZ(5px) scale(1); 
            }
            50% { 
                transform: translate(-50%, -50%) translateZ(5px) scale(1.03); 
            }
        }

        /* ÿ®ÿ∑ÿßŸÜŸäÿ© ÿßŸÑÿ∑ŸÅŸÑ */
        .baby-blanket {
            position: absolute;
            top: 65%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 180px;
            height: 30px;
            background: linear-gradient(to right, #e3f2fd, #bbdefb, #90caf9);
            border-radius: 50%;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            z-index: 4;
        }

        /* ŸÖÿ±ÿßÿ™ÿ® ÿßŸÑÿ≠ÿßÿ∂ŸÜÿ© */
        .incubator-mattress {
            position: absolute;
            bottom: 70px;
            left: 50%;
            transform: translateX(-50%) translateZ(-5px);
            width: 340px;
            height: 120px;
            background: linear-gradient(to bottom, #fff8e1 0%, #ffecb3 100%);
            border-radius: 15px;
            box-shadow: 
                0 -2px 10px rgba(0,0,0,0.1),
                inset 0 2px 5px rgba(255,255,255,0.5),
                inset 0 -2px 5px rgba(0,0,0,0.1);
            border: 2px solid #ffd54f;
        }

        .mattress-lines {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: repeating-linear-gradient(
                90deg,
                transparent,
                transparent 30px,
                rgba(255,193,7,0.2) 30px,
                rgba(255,193,7,0.2) 31px
            );
        }

        /* ŸÖÿ§ÿ¥ÿ±ÿßÿ™ ÿßŸÑÿ£ŸÜÿ∏ŸÖÿ© */
        .system-indicator {
            position: absolute;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 22px;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            animation: pulse-indicator 2.5s infinite;
            box-shadow: 
                0 0 20px rgba(0,0,0,0.4),
                inset 0 2px 5px rgba(255,255,255,0.3),
                inset 0 -2px 5px rgba(0,0,0,0.2);
            border: 3px solid rgba(255,255,255,0.4);
            transform-style: preserve-3d;
            z-index: 10;
            opacity: 0.5;
        }

        .system-indicator.active-system {
            opacity: 1;
            animation: pulse-indicator-active 2s infinite;
        }

        @keyframes pulse-indicator {
            0%, 100% { 
                transform: scale(1) translateZ(15px); 
                box-shadow: 
                    0 0 20px rgba(0,0,0,0.4),
                    0 0 30px currentColor,
                    inset 0 2px 5px rgba(255,255,255,0.3);
            }
            50% { 
                transform: scale(1.08) translateZ(20px); 
                box-shadow: 
                    0 0 30px rgba(0,0,0,0.5),
                    0 0 50px currentColor,
                    inset 0 2px 5px rgba(255,255,255,0.3);
            }
        }

        @keyframes pulse-indicator-active {
            0%, 100% { 
                transform: scale(1) translateZ(15px); 
                box-shadow: 
                    0 0 30px rgba(0,0,0,0.5),
                    0 0 60px currentColor,
                    inset 0 2px 5px rgba(255,255,255,0.3);
            }
            50% { 
                transform: scale(1.15) translateZ(25px); 
                box-shadow: 
                    0 0 40px rgba(0,0,0,0.6),
                    0 0 80px currentColor,
                    inset 0 2px 5px rgba(255,255,255,0.3);
            }
        }

        .system-indicator:hover {
            transform: scale(1.4) translateZ(25px) !important;
            z-index: 20;
            animation: none;
        }

        .indicator-heating {
            background: radial-gradient(circle, #ff6b6b, #ff5252);
            color: #ff6b6b;
            top: 68%;
            left: 8%;
        }

        .indicator-humidity {
            background: radial-gradient(circle, #4fc3f7, #29b6f6);
            color: #4fc3f7;
            top: 68%;
            right: 8%;
        }

        .indicator-oxygen {
            background: radial-gradient(circle, #81c784, #66bb6a);
            color: #81c784;
            top: 25%;
            left: 12%;
        }

        .indicator-light-normal {
            background: radial-gradient(circle, #fff176, #ffeb3b);
            color: #fff176;
            top: 8%;
            left: 50%;
            transform: translateX(-50%) translateZ(15px);
        }

        .indicator-light-jaundice {
            background: radial-gradient(circle, #ffb74d, #ffa726);
            color: #ffb74d;
            top: 8%;
            left: 28%;
        }

        .indicator-light-uv {
            background: radial-gradient(circle, #9575cd, #7e57c2);
            color: #9575cd;
            top: 8%;
            right: 28%;
        }

        /* ÿ™ÿ≥ŸÖŸäÿßÿ™ ÿßŸÑŸÖÿ§ÿ¥ÿ±ÿßÿ™ */
        .indicator-label {
            position: absolute;
            background: linear-gradient(135deg, rgba(0,0,0,0.9), rgba(30,30,30,0.9));
            color: white;
            padding: 8px 15px;
            border-radius: 8px;
            font-size: 12px;
            font-weight: 600;
            white-space: nowrap;
            pointer-events: none;
            opacity: 0;
            transition: all 0.3s ease;
            z-index: 100;
            top: -45px;
            left: 50%;
            transform: translateX(-50%) translateY(-5px);
            box-shadow: 0 5px 20px rgba(0,0,0,0.4);
            border: 1px solid rgba(255,255,255,0.2);
        }

        .indicator-label::after {
            content: '';
            position: absolute;
            bottom: -6px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 6px solid transparent;
            border-right: 6px solid transparent;
            border-top: 6px solid rgba(0,0,0,0.9);
        }

        .system-indicator:hover .indicator-label {
            opacity: 1;
            transform: translateX(-50%) translateY(0);
        }

        /* ÿ™ÿ£ÿ´Ÿäÿ±ÿßÿ™ ÿßŸÑÿ•ÿ∂ÿßÿ°ÿ© ÿßŸÑÿ´ŸÑÿßÿ´ÿ© */
        .light-effect {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            border-radius: 200px 200px 25px 25px;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.8s ease;
            mix-blend-mode: lighten;
            z-index: 8;
        }

        .light-effect.active {
            opacity: 1 !important;
        }

        /* 1. ÿ•ÿ∂ÿßÿ°ÿ© ÿπÿßÿØŸäÿ© (ÿ®Ÿäÿ∂ÿßÿ° ÿØÿßŸÅÿ¶ÿ©) */
        .light-normal {
            background: 
                radial-gradient(ellipse at 50% 10%, rgba(255, 255, 220, 0.9) 0%, rgba(255, 255, 200, 0.6) 30%, transparent 60%),
                radial-gradient(ellipse at 50% 30%, rgba(255, 250, 200, 0.5) 0%, transparent 70%);
            animation: flicker-light 3s ease-in-out infinite;
        }

        .light-normal.active {
            box-shadow: 
                inset 0 0 100px rgba(255, 255, 200, 0.6),
                0 0 50px rgba(255, 255, 200, 0.4);
        }

        @keyframes flicker-light {
            0%, 100% { filter: brightness(1); }
            50% { filter: brightness(0.95); }
        }

        /* 2. ÿßŸÑÿπŸÑÿßÿ¨ ÿßŸÑÿ∂Ÿàÿ¶Ÿä (ÿ£ÿµŸÅÿ±-ÿ£ÿ≤ÿ±ŸÇ) */
        .light-jaundice {
            background: 
                radial-gradient(ellipse at 50% 5%, rgba(255, 200, 0, 1) 0%, rgba(255, 220, 80, 0.8) 25%, rgba(255, 220, 100, 0.6) 40%, transparent 70%),
                radial-gradient(ellipse at 50% 30%, rgba(255, 180, 0, 0.7) 0%, rgba(255, 200, 50, 0.4) 40%, transparent 60%),
                radial-gradient(ellipse at 30% 20%, rgba(255, 200, 0, 0.5) 0%, transparent 50%),
                radial-gradient(ellipse at 70% 20%, rgba(255, 200, 0, 0.5) 0%, transparent 50%);
            animation: pulse-jaundice 2s ease-in-out infinite;
        }

        .light-jaundice.active {
            box-shadow: 
                inset 0 0 120px rgba(255, 200, 0, 0.8),
                0 0 80px rgba(255, 200, 0, 0.6);
        }

        @keyframes pulse-jaundice {
            0%, 100% { filter: brightness(1) saturate(1.2); }
            50% { filter: brightness(1.1) saturate(1.4); }
        }

        /* 3. ÿ™ÿπŸÇŸäŸÖ UV-C (ÿ®ŸÜŸÅÿ≥ÿ¨Ÿä) */
        .light-uv {
            background: 
                radial-gradient(ellipse at 50% 5%, rgba(150, 100, 255, 1) 0%, rgba(170, 130, 255, 0.9) 20%, rgba(180, 140, 255, 0.7) 35%, transparent 65%),
                radial-gradient(ellipse at 50% 25%, rgba(130, 90, 230, 0.8) 0%, rgba(160, 120, 250, 0.5) 35%, transparent 55%),
                radial-gradient(ellipse at 30% 15%, rgba(150, 100, 255, 0.6) 0%, transparent 40%),
                radial-gradient(ellipse at 70% 15%, rgba(150, 100, 255, 0.6) 0%, transparent 40%);
            animation: pulse-uv 1.8s ease-in-out infinite;
        }

        .light-uv.active {
            box-shadow: 
                inset 0 0 150px rgba(150, 100, 255, 0.9),
                0 0 100px rgba(150, 100, 255, 0.8);
        }

        @keyframes pulse-uv {
            0%, 100% { 
                filter: brightness(1.1) saturate(1.3);
            }
            50% { 
                filter: brightness(1.2) saturate(1.5);
            }
        }

        /* ÿ¥ÿπÿßÿπ ÿßŸÑÿ∂Ÿàÿ° */
        .light-beam {
            position: absolute;
            top: -50px;
            left: 50%;
            transform: translateX(-50%);
            width: 2px;
            height: 60px;
            background: linear-gradient(to bottom, transparent, rgba(255,255,255,0.6));
            opacity: 0;
            transition: opacity 0.8s ease;
        }

        .light-effect.active + .light-beam {
            opacity: 1;
        }

        /* Ÿàÿ∂ÿπ ÿßŸÑÿØŸàÿ±ÿßŸÜ ÿßŸÑÿ™ŸÑŸÇÿßÿ¶Ÿä */
        .incubator-3d.rotating {
            animation: rotate3d 15s linear infinite;
        }

        @keyframes rotate3d {
            from { transform: translate(-50%, -50%) rotateX(20deg) rotateY(0deg); }
            to { transform: translate(-50%, -50%) rotateX(20deg) rotateY(360deg); }
        }

        /* ÿ£ÿ≤ÿ±ÿßÿ± ÿßŸÑÿπÿ±ÿ∂ */
        .view-controls {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .view-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            background: var(--primary);
            color: white;
            cursor: pointer;
            font-size: 0.9em;
            font-weight: 600;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .view-btn:hover {
            background: var(--secondary);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }

        .view-btn.active {
            background: var(--success);
        }

        /* ÿ™ÿ£ÿ´Ÿäÿ± ŸàŸÖŸäÿ∂ ÿßŸÑÿ∑Ÿàÿßÿ±ÿ¶ */
        @keyframes emergency-flash {
            0%, 100% { background: var(--bg); }
            50% { background: rgba(239, 68, 68, 0.2); }
        }

        /* ====================================== */
        /* ÿ™ŸÜÿ≥ŸäŸÇÿßÿ™ ÿßŸÑÿ∞ŸÉÿßÿ° ÿßŸÑÿßÿµÿ∑ŸÜÿßÿπŸä ÿßŸÑÿ∑ÿ®Ÿä */
        /* ====================================== */

        .ai-model-info {
            display: grid;
            gap: 12px;
            margin-top: 15px;
        }

        .model-stat {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px;
            background: var(--light);
            border-radius: 8px;
            border-right: 3px solid var(--primary);
        }

        [data-theme="dark"] .model-stat {
            background: #374151;
        }

        .model-label {
            font-weight: 600;
            opacity: 0.8;
            font-size: 0.9em;
        }

        .model-value {
            font-weight: bold;
            color: var(--primary);
            font-size: 0.95em;
        }

        .progress-container {
            margin: 15px 0;
        }

        /* ÿ®ÿ∑ÿßŸÇÿßÿ™ ÿßŸÑÿ™ŸÜÿ®ÿ§ ÿ®ÿßŸÑÿ≠ÿßŸÑÿßÿ™ ÿßŸÑÿ≠ÿ±ÿ¨ÿ© */
        .critical-prediction-card {
            background: var(--light);
            padding: 20px;
            border-radius: 12px;
            border: 2px solid var(--border);
            transition: all 0.3s;
        }

        [data-theme="dark"] .critical-prediction-card {
            background: #374151;
        }

        .critical-prediction-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
        }

        /* ŸÖŸÇŸäÿßÿ≥ ÿßŸÑÿÆÿ∑Ÿàÿ±ÿ© */
        .risk-meter {
            width: 100%;
            height: 30px;
            background: linear-gradient(to right, 
                var(--success) 0%, 
                var(--success) 20%, 
                var(--warning) 20%, 
                var(--warning) 50%, 
                var(--danger) 50%, 
                var(--danger) 100%);
            border-radius: 15px;
            position: relative;
            overflow: hidden;
            box-shadow: inset 0 2px 5px rgba(0,0,0,0.2);
        }

        .risk-meter-bar {
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            background: rgba(255,255,255,0.9);
            border-radius: 15px;
            transition: width 1s ease-out;
            box-shadow: 0 0 10px rgba(255,255,255,0.8);
        }

        .risk-meter::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(to bottom, rgba(255,255,255,0.3), transparent);
            pointer-events: none;
        }

        /* ŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿ™ŸÜÿ®ÿ§ÿßÿ™ */
        .risk-item {
            padding: 15px;
            margin: 10px 0;
            border-radius: 10px;
            border-right: 4px solid;
            display: flex;
            align-items: flex-start;
            gap: 15px;
            transition: all 0.3s;
        }

        .risk-item:hover {
            transform: translateX(-5px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .risk-low {
            background: rgba(16, 185, 129, 0.1);
            border-right-color: var(--success);
        }

        .risk-medium {
            background: rgba(245, 158, 11, 0.1);
            border-right-color: var(--warning);
        }

        .risk-high {
            background: rgba(239, 68, 68, 0.1);
            border-right-color: var(--danger);
        }

        .risk-icon {
            font-size: 2em;
            line-height: 1;
        }

        .risk-content {
            flex: 1;
        }

        .risk-title {
            font-weight: bold;
            font-size: 1.1em;
            margin-bottom: 5px;
            color: var(--text);
        }

        .risk-description {
            font-size: 0.9em;
            opacity: 0.8;
            line-height: 1.5;
        }

        .risk-probability {
            font-size: 1.5em;
            font-weight: bold;
            text-align: right;
            min-width: 60px;
        }

        /* ÿ™ÿ≠ŸÑŸäŸÑ ÿßŸÑÿ£ŸÜŸÖÿßÿ∑ */
        .pattern-item {
            padding: 12px;
            margin: 8px 0;
            background: var(--light);
            border-radius: 8px;
            border-right: 3px solid var(--primary);
        }

        [data-theme="dark"] .pattern-item {
            background: #374151;
        }

        .pattern-title {
            font-weight: 600;
            margin-bottom: 5px;
            color: var(--primary);
        }

        .pattern-value {
            font-size: 0.9em;
            opacity: 0.8;
        }

        /* ÿßŸÑÿ™ŸàÿµŸäÿßÿ™ */
        .recommendation-item {
            padding: 15px;
            margin: 10px 0;
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1));
            border-radius: 10px;
            border-right: 4px solid var(--primary);
            display: flex;
            gap: 15px;
        }

        .recommendation-icon {
            font-size: 2em;
        }

        .recommendation-content {
            flex: 1;
        }

        .recommendation-title {
            font-weight: bold;
            margin-bottom: 8px;
            color: var(--primary);
            font-size: 1.05em;
        }

        .recommendation-text {
            font-size: 0.9em;
            line-height: 1.6;
            opacity: 0.9;
        }

        .recommendation-priority {
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 0.8em;
            font-weight: bold;
            margin-top: 8px;
            display: inline-block;
        }

        .priority-high {
            background: rgba(239, 68, 68, 0.2);
            color: var(--danger);
        }

        .priority-medium {
            background: rgba(245, 158, 11, 0.2);
            color: var(--warning);
        }

        .priority-low {
            background: rgba(16, 185, 129, 0.2);
            color: var(--success);
        }

        /* ÿßŸÑÿ•ŸÜÿ∞ÿßÿ± ÿßŸÑŸÖÿ®ŸÉÿ± */
        .warning-item {
            padding: 15px;
            margin: 10px 0;
            background: rgba(239, 68, 68, 0.05);
            border-radius: 10px;
            border: 2px solid var(--danger);
            display: flex;
            align-items: center;
            gap: 15px;
            animation: warning-pulse 2s infinite;
        }

        @keyframes warning-pulse {
            0%, 100% { 
                box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.4);
            }
            50% { 
                box-shadow: 0 0 0 10px rgba(239, 68, 68, 0);
            }
        }

        .warning-icon {
            font-size: 2em;
            color: var(--danger);
        }

        .warning-content {
            flex: 1;
        }

        .warning-title {
            font-weight: bold;
            color: var(--danger);
            margin-bottom: 5px;
        }

        /* ÿßŸÑÿ™ÿ∑Ÿàÿ± ÿßŸÑŸÜŸÖÿßÿ¶Ÿä */
        .development-tracking {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }

        .development-chart {
            background: var(--light);
            padding: 20px;
            border-radius: 12px;
        }

        [data-theme="dark"] .development-chart {
            background: #374151;
        }

        .development-milestones {
            background: var(--light);
            padding: 20px;
            border-radius: 12px;
        }

        [data-theme="dark"] .development-milestones {
            background: #374151;
        }

        .milestone-item {
            padding: 12px;
            margin: 8px 0;
            background: var(--card-bg);
            border-radius: 8px;
            border-right: 3px solid var(--success);
        }

        .milestone-achieved {
            opacity: 0.6;
            border-right-color: var(--success);
        }

        .milestone-pending {
            border-right-color: var(--warning);
        }

        /* ÿ≥ÿ¨ŸÑ ÿßŸÑÿ™ÿ≠ŸÑŸäŸÑÿßÿ™ */
        .ai-history-list {
            max-height: 500px;
            overflow-y: auto;
        }

        .ai-history-item {
            padding: 15px;
            margin: 10px 0;
            background: var(--light);
            border-radius: 10px;
            border-right: 4px solid var(--primary);
        }

        [data-theme="dark"] .ai-history-item {
            background: #374151;
        }

        .ai-history-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border);
        }

        .ai-history-type {
            font-weight: bold;
            color: var(--primary);
        }

        .ai-history-time {
            font-size: 0.85em;
            opacity: 0.7;
        }

        .ai-history-result {
            font-size: 0.9em;
            line-height: 1.6;
        }

        /* Responsive ŸÑŸÑÿ∞ŸÉÿßÿ° ÿßŸÑÿßÿµÿ∑ŸÜÿßÿπŸä */
        @media (max-width: 768px) {
            .development-tracking {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body data-theme="light">
    <div class="container">
        <!-- ÿßŸÑŸáŸäÿØÿ± -->
        <div class="header">
            <div class="header-left">
                <span style="font-size: 2.5em;">üë∂</span>
                <div>
                    <h1>ÿ≠ÿßÿ∂ŸÜÿ© ÿßŸÑÿ£ÿ∑ŸÅÿßŸÑ ÿßŸÑÿ∞ŸÉŸäÿ©</h1>
                    <span style="opacity: 0.7; font-size: 0.9em;">NICU Smart Incubator Pro</span>
                </div>
            </div>
            <div class="header-right">
                <div class="status-badges">
                    <span class="badge badge-online" id="connectionBadge">‚óè ŸÖÿ™ÿµŸÑ</span>
                    <span class="badge badge-normal" id="statusBadge">‚úì ÿ∑ÿ®ŸäÿπŸä</span>
                </div>
                <button class="theme-toggle" onclick="toggleTheme()">üåô</button>
            </div>
        </div>

        <!-- ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑŸÖÿ±Ÿäÿ∂ -->
        <div class="patient-info">
            <h2>üìã ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑŸÖÿ±Ÿäÿ∂</h2>
            <div class="patient-details">
                <div class="patient-field">
                    <span class="patient-label">ÿßŸÑÿßÿ≥ŸÖ:</span>
                    <span class="patient-value">ÿ∑ŸÅŸÑ ÿ±ÿ∂Ÿäÿπ - 001</span>
                </div>
                <div class="patient-field">
                    <span class="patient-label">ÿ™ÿßÿ±ŸäÿÆ ÿßŸÑŸàŸÑÿßÿØÿ©:</span>
                    <span class="patient-value">01/02/2026</span>
                </div>
                <div class="patient-field">
                    <span class="patient-label">ÿπŸÖÿ± ÿßŸÑÿ≠ŸÖŸÑ:</span>
                    <span class="patient-value">32 ÿ£ÿ≥ÿ®Ÿàÿπ</span>
                </div>
                <div class="patient-field">
                    <span class="patient-label">ŸÖÿØÿ© ÿßŸÑÿ•ŸÇÿßŸÖÿ©:</span>
                    <span class="patient-value">5 ÿ£ŸäÿßŸÖ</span>
                </div>
                <div class="patient-field">
                    <span class="patient-label">ÿßŸÑŸàÿ≤ŸÜ ÿßŸÑÿ≠ÿßŸÑŸä:</span>
                    <span class="patient-value" id="currentWeight">2.4 ŸÉÿ¨ŸÖ</span>
                </div>
                <div class="patient-field">
                    <span class="patient-label">ÿ¢ÿÆÿ± ÿ™ÿ≠ÿØŸäÿ´:</span>
                    <span class="patient-value" id="lastUpdate">ÿßŸÑÿ¢ŸÜ</span>
                </div>
            </div>
        </div>

        <!-- ÿßŸÑÿ™ÿ®ŸàŸäÿ®ÿßÿ™ -->
        <div class="tabs">
            <button class="tab active" onclick="switchTab('monitoring')">üìä ÿßŸÑŸÖÿ±ÿßŸÇÿ®ÿ© ÿßŸÑÿ≠Ÿäÿ©</button>
            <button class="tab" onclick="switchTab('control')">‚öôÔ∏è ÿßŸÑÿ™ÿ≠ŸÉŸÖ ŸàÿßŸÑÿ•ÿπÿØÿßÿØÿßÿ™</button>
            <button class="tab" onclick="switchTab('ai')">ü§ñ ÿßŸÑÿ∞ŸÉÿßÿ° ÿßŸÑÿßÿµÿ∑ŸÜÿßÿπŸä ÿßŸÑÿ∑ÿ®Ÿä</button>
            <button class="tab" onclick="switchTab('charts')">üìà ÿßŸÑÿ±ÿ≥ŸàŸÖ ÿßŸÑÿ®ŸäÿßŸÜŸäÿ©</button>
            <button class="tab" onclick="switchTab('alerts')">üö® ÿßŸÑÿ™ŸÜÿ®ŸäŸáÿßÿ™</button>
            <button class="tab" onclick="switchTab('notes')">üìù ŸÖŸÑÿßÿ≠ÿ∏ÿßÿ™ ÿßŸÑŸÖŸÖÿ±ÿ∂ÿßÿ™</button>
            <button class="tab" onclick="switchTab('arduino')">üîå Arduino/ŸÇÿßÿπÿØÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™</button>
            <button class="tab" onclick="switchTab('settings')">üîß ÿßŸÑÿ•ÿπÿØÿßÿØÿßÿ™</button>
        </div>

        <!-- ÿ™ÿ®ŸàŸäÿ® ÿßŸÑŸÖÿ±ÿßŸÇÿ®ÿ© -->
        <div id="monitoring" class="tab-content active">
            <div class="grid">
                <!-- ÿßŸÑŸÇÿ±ÿßÿ°ÿßÿ™ ÿßŸÑÿ≠ŸäŸàŸäÿ© -->
                <div class="card">
                    <div class="card-title">
                        <span>ü´Ä</span>
                        ÿßŸÑŸÖÿ§ÿ¥ÿ±ÿßÿ™ ÿßŸÑÿ≠ŸäŸàŸäÿ©
                    </div>
                    <div class="sensor-grid">
                        <div class="sensor-item glow">
                            <div class="sensor-icon">üå°Ô∏è</div>
                            <div class="sensor-value" id="bodyTemp">36.5</div>
                            <div class="sensor-label">ÿØÿ±ÿ¨ÿ© ÿßŸÑÿ≠ÿ±ÿßÿ±ÿ© ¬∞C</div>
                            <span class="sensor-status status-ok">ÿ∑ÿ®ŸäÿπŸä</span>
                        </div>
                        <div class="sensor-item">
                            <div class="sensor-icon">‚ù§Ô∏è</div>
                            <div class="sensor-value" id="heartRate">140</div>
                            <div class="sensor-label">ŸÜÿ®ÿ∂ÿßÿ™ ÿßŸÑŸÇŸÑÿ® / ÿØŸÇŸäŸÇÿ©</div>
                            <span class="sensor-status status-ok">ÿ∑ÿ®ŸäÿπŸä</span>
                        </div>
                        <div class="sensor-item">
                            <div class="sensor-icon">ü´Å</div>
                            <div class="sensor-value" id="oxygenLevel">96</div>
                            <div class="sensor-label">ÿßŸÑÿ£ŸÉÿ≥ÿ¨ŸäŸÜ SpO2 %</div>
                            <span class="sensor-status status-ok">ÿ∑ÿ®ŸäÿπŸä</span>
                        </div>
                        <div class="sensor-item">
                            <div class="sensor-icon">üå¨Ô∏è</div>
                            <div class="sensor-value" id="respRate">45</div>
                            <div class="sensor-label">ŸÖÿπÿØŸÑ ÿßŸÑÿ™ŸÜŸÅÿ≥ / ÿØŸÇŸäŸÇÿ©</div>
                            <span class="sensor-status status-ok">ÿ∑ÿ®ŸäÿπŸä</span>
                        </div>
                    </div>
                </div>

                <!-- ÿßŸÑÿ®Ÿäÿ¶ÿ© ÿßŸÑÿØÿßÿÆŸÑŸäÿ© -->
                <div class="card">
                    <div class="card-title">
                        <span>üè†</span>
                        ÿßŸÑÿ®Ÿäÿ¶ÿ© ÿßŸÑÿØÿßÿÆŸÑŸäÿ©
                    </div>
                    <div class="sensor-grid">
                        <div class="sensor-item">
                            <div class="sensor-icon">üíß</div>
                            <div class="sensor-value" id="humidity">55</div>
                            <div class="sensor-label">ÿßŸÑÿ±ÿ∑Ÿàÿ®ÿ© %</div>
                            <span class="sensor-status status-ok">ŸÖŸÜÿßÿ≥ÿ®</span>
                        </div>
                        <div class="sensor-item">
                            <div class="sensor-icon">‚öñÔ∏è</div>
                            <div class="sensor-value" id="weight">2.4</div>
                            <div class="sensor-label">ÿßŸÑŸàÿ≤ŸÜ ŸÉÿ¨ŸÖ</div>
                            <span class="sensor-status status-ok">+50g ÿßŸÑŸäŸàŸÖ</span>
                        </div>
                        <div class="sensor-item">
                            <div class="sensor-icon">üîä</div>
                            <div class="sensor-value" id="noise">42</div>
                            <div class="sensor-label">ÿßŸÑÿ∂Ÿàÿ∂ÿßÿ° dB</div>
                            <span class="sensor-status status-ok">ŸáÿßÿØÿ¶</span>
                        </div>
                        <div class="sensor-item">
                            <div class="sensor-icon">üå°Ô∏è</div>
                            <div class="sensor-value" id="envTemp">35.0</div>
                            <div class="sensor-label">ÿ≠ÿ±ÿßÿ±ÿ© ÿßŸÑÿ≠ÿßÿ∂ŸÜÿ© ¬∞C</div>
                            <span class="sensor-status status-ok">ŸÖÿ´ÿßŸÑŸä</span>
                        </div>
                    </div>
                </div>

                <!-- ÿßŸÑÿπÿ±ÿ∂ ÿßŸÑŸÖÿ±ÿ¶Ÿä -->
                <div class="card" style="grid-column: 1 / -1;">
                    <div class="card-title">
                        <span>üëÅÔ∏è</span>
                        ÿßŸÑÿπÿ±ÿ∂ ÿßŸÑŸÖÿ±ÿ¶Ÿä ŸÑŸÑÿ≠ÿßÿ∂ŸÜÿ©
                    </div>
                    <div class="incubator-visual">
                        <div class="incubator-overlay">
                            <span>üå°Ô∏è <strong id="visualTemp">36.5¬∞C</strong></span>
                            <span>üíß <strong id="visualHumidity">55%</strong></span>
                            <span>‚ù§Ô∏è <strong id="visualHeart">140 bpm</strong></span>
                            <span>ü´Å <strong id="visualOxygen">96%</strong></span>
                        </div>
                        <div class="baby-icon">üë∂</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ÿ™ÿ®ŸàŸäÿ® ÿßŸÑÿ™ÿ≠ŸÉŸÖ -->
        <div id="control" class="tab-content">
            <!-- ÿßŸÑÿπÿ±ÿ∂ ÿßŸÑÿ™ŸÅÿßÿπŸÑŸä ÿ´ŸÑÿßÿ´Ÿä ÿßŸÑÿ£ÿ®ÿπÿßÿØ -->
            <div class="card" style="grid-column: 1 / -1; margin-bottom: 20px;">
                <div class="card-title">
                    <span>üé®</span>
                    ÿßŸÑÿπÿ±ÿ∂ ÿßŸÑÿ™ŸÅÿßÿπŸÑŸä ÿ´ŸÑÿßÿ´Ÿä ÿßŸÑÿ£ÿ®ÿπÿßÿØ - ÿßŸÑÿ≠ÿßÿ∂ŸÜÿ© ÿßŸÑŸàÿßŸÇÿπŸäÿ©
                </div>
                <div class="d3-viewer-container">
                    <div class="d3-canvas" id="d3CanvasControl">
                        <!-- ÿ∏ŸÑ ÿ£ÿ±ÿ∂Ÿä -->
                        <div class="floor-shadow"></div>
                        
                        <div class="incubator-3d" id="incubator3dControl">
                            <!-- ÿßŸÑŸÇÿßÿπÿØÿ© -->
                            <div class="incubator-base">
                                <!-- ŸÑŸàÿ≠ÿ© ÿßŸÑÿ™ÿ≠ŸÉŸÖ -->
                                <div class="base-panel">
                                    <div class="control-led led-green" id="ledPower"></div>
                                    <div class="control-led led-yellow" id="ledWarning"></div>
                                    <div class="control-led led-blue" id="ledSystem"></div>
                                    <div style="color: white; font-size: 10px; font-weight: bold;">NICU PRO</div>
                                </div>
                            </div>
                            
                            <!-- ÿßŸÑŸÖÿ±ÿßÿ™ÿ® -->
                            <div class="incubator-mattress">
                                <div class="mattress-lines"></div>
                            </div>
                            
                            <!-- ÿ®ÿ∑ÿßŸÜŸäÿ© ÿßŸÑÿ∑ŸÅŸÑ -->
                            <div class="baby-blanket"></div>
                            
                            <!-- ÿßŸÑÿ∑ŸÅŸÑ -->
                            <div class="baby-3d">üë∂</div>
                            
                            <!-- ÿßŸÑÿ∫ÿ∑ÿßÿ° ÿßŸÑÿ≤ÿ¨ÿßÿ¨Ÿä -->
                            <div class="incubator-dome" id="incubatorDomeControl">
                                <!-- ÿßŸÜÿπŸÉÿßÿ≥ÿßÿ™ ÿßŸÑÿ≤ÿ¨ÿßÿ¨ -->
                                <div class="glass-reflection"></div>
                                <div class="glass-reflection-2"></div>
                                
                                <!-- ÿ™ÿ£ÿ´Ÿäÿ±ÿßÿ™ ÿßŸÑÿ•ÿ∂ÿßÿ°ÿ© ÿßŸÑÿ´ŸÑÿßÿ´ÿ© -->
                                <div class="light-effect light-normal" id="lightNormalControl"></div>
                                <div class="light-beam"></div>
                                
                                <div class="light-effect light-jaundice" id="lightJaundiceControl"></div>
                                <div class="light-beam"></div>
                                
                                <div class="light-effect light-uv" id="lightUVControl"></div>
                                <div class="light-beam"></div>
                            </div>
                            
                            <!-- ŸÖÿ§ÿ¥ÿ±ÿßÿ™ ÿßŸÑÿ£ŸÜÿ∏ŸÖÿ© ÿßŸÑÿ™ŸÅÿßÿπŸÑŸäÿ© -->
                            <div class="system-indicator indicator-heating active-system" id="heatingIndicator">
                                <span>üî•</span>
                                <div class="indicator-label">ŸÜÿ∏ÿßŸÖ ÿßŸÑÿ™ÿØŸÅÿ¶ÿ©</div>
                            </div>
                            
                            <div class="system-indicator indicator-humidity active-system" id="humidityIndicator">
                                <span>üíß</span>
                                <div class="indicator-label">ŸÜÿ∏ÿßŸÖ ÿßŸÑÿ™ÿ±ÿ∑Ÿäÿ®</div>
                            </div>
                            
                            <div class="system-indicator indicator-oxygen active-system" id="oxygenIndicator">
                                <span>ü´Å</span>
                                <div class="indicator-label">ÿ•ŸÖÿØÿßÿØ ÿßŸÑÿ£ŸÉÿ≥ÿ¨ŸäŸÜ</div>
                            </div>
                            
                            <div class="system-indicator indicator-light-normal active-system" id="normalLightIndicator">
                                <span>üí°</span>
                                <div class="indicator-label">ÿ•ÿ∂ÿßÿ°ÿ© ÿπÿßÿØŸäÿ©</div>
                            </div>
                            
                            <div class="system-indicator indicator-light-jaundice" id="jaundiceLightIndicator">
                                <span>üü°</span>
                                <div class="indicator-label">ÿπŸÑÿßÿ¨ ÿ∂Ÿàÿ¶Ÿä</div>
                            </div>
                            
                            <div class="system-indicator indicator-light-uv" id="uvLightIndicator">
                                <span>üîµ</span>
                                <div class="indicator-label">ÿ™ÿπŸÇŸäŸÖ UV-C</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ÿ£ÿ≤ÿ±ÿßÿ± ÿßŸÑÿ™ÿ≠ŸÉŸÖ ŸÅŸä ÿßŸÑÿπÿ±ÿ∂ -->
                    <div class="view-controls">
                        <button class="view-btn" onclick="toggleRotationControl()">
                            <span id="rotationIconControl">üîÑ</span>
                            <span id="rotationTextControl">ÿØŸàÿ±ÿßŸÜ ÿ™ŸÑŸÇÿßÿ¶Ÿä</span>
                        </button>
                        <button class="view-btn" onclick="resetViewControl()">
                            <span>üîÉ</span>
                            ÿ•ÿπÿßÿØÿ© ÿ∂ÿ®ÿ∑ ÿßŸÑÿπÿ±ÿ∂
                        </button>
                        <button class="view-btn" onclick="zoomInControl()">
                            <span>üîç</span>
                            ÿ™ŸÉÿ®Ÿäÿ±
                        </button>
                        <button class="view-btn" onclick="zoomOutControl()">
                            <span>üîé</span>
                            ÿ™ÿµÿ∫Ÿäÿ±
                        </button>
                    </div>
                    
                    <!-- ÿ£ÿ≤ÿ±ÿßÿ± ÿßÿÆÿ™ÿ®ÿßÿ± ÿ≥ÿ±Ÿäÿπ ŸÑŸÑÿ•ÿ∂ÿßÿ°ÿßÿ™ -->
                    <div style="margin-top: 20px; padding: 20px; background: var(--light); border-radius: 12px; border: 2px dashed var(--primary);">
                        <h4 style="margin-bottom: 15px; color: var(--primary); text-align: center;">üß™ ÿßÿÆÿ™ÿ®ÿßÿ± ÿ≥ÿ±Ÿäÿπ ŸÑŸÑÿ•ÿ∂ÿßÿ°ÿßÿ™</h4>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px;">
                            <button class="control-btn btn-primary" onclick="testLight('normal')" style="font-size: 0.9em; padding: 10px;">
                                üí° ÿßÿÆÿ™ÿ®ÿßÿ± ÿßŸÑÿ•ÿ∂ÿßÿ°ÿ© ÿßŸÑÿπÿßÿØŸäÿ©
                            </button>
                            <button class="control-btn btn-warning" onclick="testLight('jaundice')" style="font-size: 0.9em; padding: 10px;">
                                üü° ÿßÿÆÿ™ÿ®ÿßÿ± ÿßŸÑÿπŸÑÿßÿ¨ ÿßŸÑÿ∂Ÿàÿ¶Ÿä
                            </button>
                            <button class="control-btn btn-danger" onclick="testLight('uv')" style="font-size: 0.9em; padding: 10px;">
                                üîµ ÿßÿÆÿ™ÿ®ÿßÿ± UV-C
                            </button>
                            <button class="control-btn btn-success" onclick="testAllLights()" style="font-size: 0.9em; padding: 10px;">
                                ‚ú® ÿßÿÆÿ™ÿ®ÿßÿ± ÿ¨ŸÖŸäÿπ ÿßŸÑÿ•ÿ∂ÿßÿ°ÿßÿ™
                            </button>
                        </div>
                        <div style="margin-top: 10px; text-align: center; font-size: 0.85em; opacity: 0.7;">
                            üí° ÿßÿ∂ÿ∫ÿ∑ ŸÑÿßÿÆÿ™ÿ®ÿßÿ± ŸÉŸÑ ÿ•ÿ∂ÿßÿ°ÿ© ŸÑŸÖÿØÿ© 3 ÿ´ŸàÿßŸÜŸç
                        </div>
                    </div>
                </div>
            </div>

            <div class="grid">
                <!-- ÿßŸÑÿ™ÿØŸÅÿ¶ÿ© -->
                <div class="card">
                    <div class="card-title">
                        <span>üî•</span>
                        ŸÜÿ∏ÿßŸÖ ÿßŸÑÿ™ÿØŸÅÿ¶ÿ©
                    </div>
                    <div class="switch-container">
                        <span><strong>ÿ™ŸÅÿπŸäŸÑ ÿßŸÑÿ™ÿØŸÅÿ¶ÿ©</strong></span>
                        <label class="switch">
                            <input type="checkbox" checked id="heatingSwitch">
                            <span class="switch-slider"></span>
                        </label>
                    </div>
                    <div class="slider-container">
                        <div class="slider-header">
                            <span>ÿØÿ±ÿ¨ÿ© ÿßŸÑÿ≠ÿ±ÿßÿ±ÿ© ÿßŸÑŸÖÿ≥ÿ™ŸáÿØŸÅÿ©</span>
                            <span class="slider-value" id="heatingTempValue">36.5¬∞C</span>
                        </div>
                        <input type="range" class="slider" min="32" max="37" step="0.5" value="36.5" 
                               id="heatingTemp" oninput="updateHeatingTemp(this.value)">
                    </div>
                </div>

                <!-- ÿßŸÑÿ™ÿ±ÿ∑Ÿäÿ® -->
                <div class="card">
                    <div class="card-title">
                        <span>üí¶</span>
                        ŸÜÿ∏ÿßŸÖ ÿßŸÑÿ™ÿ±ÿ∑Ÿäÿ®
                    </div>
                    <div class="switch-container">
                        <span><strong>ÿ™ŸÅÿπŸäŸÑ ÿßŸÑÿ™ÿ±ÿ∑Ÿäÿ®</strong></span>
                        <label class="switch">
                            <input type="checkbox" checked id="humidifierSwitch">
                            <span class="switch-slider"></span>
                        </label>
                    </div>
                    <div class="slider-container">
                        <div class="slider-header">
                            <span>ŸÖÿ≥ÿ™ŸàŸâ ÿßŸÑÿ±ÿ∑Ÿàÿ®ÿ© ÿßŸÑŸÖÿ≥ÿ™ŸáÿØŸÅ</span>
                            <span class="slider-value" id="humidityTargetValue">55%</span>
                        </div>
                        <input type="range" class="slider" min="40" max="70" step="5" value="55" 
                               id="humidityTarget" oninput="updateHumidityTarget(this.value)">
                    </div>
                </div>

                <!-- ÿßŸÑÿ£ŸÉÿ≥ÿ¨ŸäŸÜ -->
                <div class="card">
                    <div class="card-title">
                        <span>ü´Å</span>
                        ÿ•ŸÖÿØÿßÿØ ÿßŸÑÿ£ŸÉÿ≥ÿ¨ŸäŸÜ
                    </div>
                    <div class="switch-container">
                        <span><strong>ÿ™ŸÅÿπŸäŸÑ ÿßŸÑÿ£ŸÉÿ≥ÿ¨ŸäŸÜ</strong></span>
                        <label class="switch">
                            <input type="checkbox" checked id="oxygenSwitch" onchange="toggleOxygenSystem(this.checked)">
                            <span class="switch-slider"></span>
                        </label>
                    </div>
                    <div class="slider-container">
                        <div class="slider-header">
                            <span>ÿ™ÿ±ŸÉŸäÿ≤ ÿßŸÑÿ£ŸÉÿ≥ÿ¨ŸäŸÜ</span>
                            <span class="slider-value" id="oxygenLevelValue">30%</span>
                        </div>
                        <input type="range" class="slider" min="21" max="100" step="1" value="30" 
                               id="oxygenLevelControl" oninput="updateOxygenLevel(this.value)">
                    </div>
                </div>

                <!-- ÿßŸÑÿ•ÿ∂ÿßÿ°ÿ© ÿßŸÑÿπÿßÿØŸäÿ© -->
                <div class="card">
                    <div class="card-title">
                        <span>üí°</span>
                        ÿßŸÑÿ•ÿ∂ÿßÿ°ÿ© ÿßŸÑÿπÿßÿØŸäÿ©
                    </div>
                    <div class="switch-container">
                        <span><strong>ÿ™ŸÅÿπŸäŸÑ ÿßŸÑÿ•ÿ∂ÿßÿ°ÿ©</strong></span>
                        <label class="switch">
                            <input type="checkbox" checked id="normalLightSwitch" onchange="toggleNormalLight(this.checked)">
                            <span class="switch-slider"></span>
                        </label>
                    </div>
                    <div class="slider-container">
                        <div class="slider-header">
                            <span>ÿ¥ÿØÿ© ÿßŸÑÿ•ÿ∂ÿßÿ°ÿ©</span>
                            <span class="slider-value" id="normalLightValue">50%</span>
                        </div>
                        <input type="range" class="slider" min="0" max="100" step="10" value="50" 
                               id="normalLightIntensity" oninput="updateNormalLightIntensity(this.value)">
                    </div>
                    <div style="background: #fff9e6; padding: 12px; border-radius: 8px; margin-top: 10px; border-right: 4px solid #ffc107;">
                        <small style="color: #856404;">
                            üí° <strong>ŸÖÿπŸÑŸàŸÖÿ©:</strong> ÿ•ÿ∂ÿßÿ°ÿ© LED ÿ®Ÿäÿ∂ÿßÿ° ÿØÿßŸÅÿ¶ÿ© ŸÑÿ™ŸàŸÅŸäÿ± ÿ®Ÿäÿ¶ÿ© ŸÖÿ±Ÿäÿ≠ÿ© ŸÑŸÑÿ∑ŸÅŸÑ ŸàÿßŸÑÿ≥ŸÖÿßÿ≠ ÿ®ÿßŸÑŸÖÿ±ÿßŸÇÿ®ÿ© ÿØŸàŸÜ ÿ•ÿ≤ÿπÿßÿ¨.
                        </small>
                    </div>
                </div>

                <!-- ÿßŸÑÿπŸÑÿßÿ¨ ÿßŸÑÿ∂Ÿàÿ¶Ÿä ŸÑŸÑŸäÿ±ŸÇÿßŸÜ -->
                <div class="card">
                    <div class="card-title">
                        <span>üü°</span>
                        ÿßŸÑÿπŸÑÿßÿ¨ ÿßŸÑÿ∂Ÿàÿ¶Ÿä (ÿßŸÑŸäÿ±ŸÇÿßŸÜ/ÿßŸÑÿµŸÅÿßÿ±)
                    </div>
                    <div class="switch-container">
                        <span><strong>ÿ™ŸÅÿπŸäŸÑ ÿßŸÑÿ∂Ÿàÿ° ÿßŸÑÿ£ÿµŸÅÿ±</strong></span>
                        <label class="switch">
                            <input type="checkbox" id="jaundiceSwitch" onchange="toggleJaundiceLight(this.checked)">
                            <span class="switch-slider"></span>
                        </label>
                    </div>
                    <div class="slider-container">
                        <div class="slider-header">
                            <span>ÿ¥ÿØÿ© ÿßŸÑÿ∂Ÿàÿ° ÿßŸÑÿ£ÿµŸÅÿ± (450-470 nm)</span>
                            <span class="slider-value" id="jaundiceLightValue">60%</span>
                        </div>
                        <input type="range" class="slider" min="0" max="100" step="10" value="60" 
                               id="jaundiceLightIntensity" oninput="updateJaundiceLightIntensity(this.value)">
                    </div>
                    <div class="slider-container">
                        <div class="slider-header">
                            <span>ŸÖÿØÿ© ÿßŸÑÿπŸÑÿßÿ¨ ÿßŸÑŸÖÿ™ÿ®ŸÇŸäÿ©</span>
                            <span class="slider-value" id="jaundiceTimerDisplay">0:00:00</span>
                        </div>
                    </div>
                    <div style="background: #fff3cd; padding: 12px; border-radius: 8px; margin-top: 10px; border-right: 4px solid #ffc107;">
                        <small style="color: #856404;">
                            ‚ö†Ô∏è <strong>ÿ™ŸÜÿ®ŸäŸá ÿ∑ÿ®Ÿä:</strong> Ÿäÿ≥ÿ™ÿÆÿØŸÖ ŸÑÿπŸÑÿßÿ¨ ÿßŸÑŸäÿ±ŸÇÿßŸÜ ÿßŸÑŸàŸÑŸäÿØŸä (ÿßÿ±ÿ™ŸÅÿßÿπ ÿßŸÑÿ®ŸäŸÑŸäÿ±Ÿàÿ®ŸäŸÜ). 
                            ÿßŸÑÿ∑ŸàŸÑ ÿßŸÑŸÖŸàÿ¨Ÿä ÿßŸÑÿ£ÿ≤ÿ±ŸÇ-ÿßŸÑÿ£ÿÆÿ∂ÿ± (450-470nm) Ÿäÿ≠ŸàŸÑ ÿßŸÑÿ®ŸäŸÑŸäÿ±Ÿàÿ®ŸäŸÜ ÿ•ŸÑŸâ ÿ¥ŸÉŸÑ ŸÇÿßÿ®ŸÑ ŸÑŸÑÿ∞Ÿàÿ®ÿßŸÜ ŸÅŸä ÿßŸÑŸÖÿßÿ°.
                            <br>‚è±Ô∏è ŸÖÿØÿ© ÿßŸÑÿπŸÑÿßÿ¨ ÿßŸÑŸÖÿπÿ™ÿßÿØÿ©: 8-12 ÿ≥ÿßÿπÿ© ÿ≠ÿ≥ÿ® ŸÖÿ≥ÿ™ŸàŸâ ÿßŸÑÿ®ŸäŸÑŸäÿ±Ÿàÿ®ŸäŸÜ.
                        </small>
                    </div>
                </div>

                <!-- ÿ™ÿπŸÇŸäŸÖ UV-C -->
                <div class="card">
                    <div class="card-title">
                        <span>üîµ</span>
                        ÿ™ÿπŸÇŸäŸÖ UV-C (ÿßŸÑÿ£ÿ¥ÿπÿ© ŸÅŸàŸÇ ÿßŸÑÿ®ŸÜŸÅÿ≥ÿ¨Ÿäÿ©)
                    </div>
                    <div class="switch-container">
                        <span><strong>ÿ™ŸÅÿπŸäŸÑ ÿßŸÑÿ™ÿπŸÇŸäŸÖ</strong></span>
                        <label class="switch">
                            <input type="checkbox" id="uvSwitch" onchange="toggleUVSterilization(this.checked)">
                            <span class="switch-slider"></span>
                        </label>
                    </div>
                    <div class="slider-container">
                        <div class="slider-header">
                            <span>ŸÖÿØÿ© ÿßŸÑÿ™ÿπŸÇŸäŸÖ (ÿØŸÇÿßÿ¶ŸÇ)</span>
                            <span class="slider-value" id="uvDurationValue">15 ÿØ</span>
                        </div>
                        <input type="range" class="slider" min="5" max="60" step="5" value="15" 
                               id="uvDuration" oninput="updateUVDuration(this.value)">
                    </div>
                    <div id="uvTimer" style="display: none; text-align: center; margin-top: 15px; padding: 15px; background: #e3f2fd; border-radius: 10px;">
                        <div style="font-size: 2em; font-weight: bold; color: #1976d2;" id="uvCountdown">15:00</div>
                        <div style="color: #1565c0; margin-top: 5px;">‚è±Ô∏è ÿßŸÑÿ™ÿπŸÇŸäŸÖ ÿ¨ÿßÿ±Ÿä...</div>
                        <div style="margin-top: 10px; padding: 10px; background: white; border-radius: 8px;">
                            <div style="font-size: 0.9em; margin-bottom: 5px;">ŸÜÿ≥ÿ®ÿ© ÿßŸÑÿ•ŸÉŸÖÿßŸÑ:</div>
                            <div style="width: 100%; height: 20px; background: #e0e0e0; border-radius: 10px; overflow: hidden;">
                                <div id="uvProgressBar" style="width: 0%; height: 100%; background: linear-gradient(90deg, #4fc3f7, #29b6f6); transition: width 1s linear;"></div>
                            </div>
                        </div>
                        <button class="btn-small btn-danger" onclick="stopUVSterilization()" style="margin-top: 10px; padding: 8px 20px;">
                            ‚èπÔ∏è ÿ•ŸäŸÇÿßŸÅ ŸÅŸàÿ±Ÿä
                        </button>
                    </div>
                    <div style="background: #ffebee; padding: 12px; border-radius: 8px; margin-top: 10px; border-right: 4px solid #ef4444;">
                        <small style="color: #c62828;">
                            ‚ö†Ô∏è <strong>ÿ™ÿ≠ÿ∞Ÿäÿ± ÿ£ŸÖÿßŸÜ ÿ≠ÿ±ÿ¨:</strong> Ÿäÿ¨ÿ® ÿ•ÿÆŸÑÿßÿ° ÿßŸÑÿ≠ÿßÿ∂ŸÜÿ© ÿ™ŸÖÿßŸÖÿßŸã ÿ£ÿ´ŸÜÿßÿ° ÿßŸÑÿ™ÿπŸÇŸäŸÖ! 
                            ÿßŸÑÿ£ÿ¥ÿπÿ© UV-C (254nm) ÿÆÿ∑ÿ±ÿ© ÿ¨ÿØÿßŸã ÿπŸÑŸâ ÿßŸÑÿ®ÿ¥ÿ±ÿ© ŸàÿßŸÑÿπŸäŸÜŸäŸÜ ŸàŸÇÿØ ÿ™ÿ≥ÿ®ÿ® ÿ≠ÿ±ŸàŸÇ Ÿàÿ™ŸÑŸÅ ÿØÿßÿ¶ŸÖ.
                            <br>üîí <strong>ÿ®ÿ±Ÿàÿ™ŸàŸÉŸàŸÑ ÿßŸÑÿ™ÿπŸÇŸäŸÖ:</strong>
                            <br>1Ô∏è‚É£ ÿ•ÿÆÿ±ÿßÿ¨ ÿßŸÑÿ∑ŸÅŸÑ ÿ®ÿßŸÑŸÉÿßŸÖŸÑ ŸÖŸÜ ÿßŸÑÿ≠ÿßÿ∂ŸÜÿ©
                            <br>2Ô∏è‚É£ ÿßŸÑÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿπÿØŸÖ Ÿàÿ¨ŸàÿØ ÿ£Ÿä ÿ¥ÿÆÿµ ÿ®ÿßŸÑŸÇÿ±ÿ®
                            <br>3Ô∏è‚É£ ÿ™ÿ¥ÿ∫ŸäŸÑ ÿßŸÑŸÜÿ∏ÿßŸÖ Ÿàÿ•ÿ∫ŸÑÿßŸÇ ÿßŸÑÿ∫ÿ∑ÿßÿ°
                            <br>4Ô∏è‚É£ ÿßŸÑÿßŸÜÿ™ÿ∏ÿßÿ± ÿ≠ÿ™Ÿâ ÿßŸÜÿ™Ÿáÿßÿ° ÿßŸÑÿØŸàÿ±ÿ© ÿßŸÑŸÉÿßŸÖŸÑÿ©
                            <br>‚úÖ <strong>ÿßŸÑŸÅÿπÿßŸÑŸäÿ©:</strong> ŸäŸÇÿ™ŸÑ 99.9% ŸÖŸÜ ÿßŸÑÿ®ŸÉÿ™Ÿäÿ±Ÿäÿß ŸàÿßŸÑŸÅŸäÿ±Ÿàÿ≥ÿßÿ™ ŸàÿßŸÑŸÅÿ∑ÿ±Ÿäÿßÿ™
                        </small>
                    </div>
                </div>

                <!-- ÿ£ÿ≤ÿ±ÿßÿ± ÿßŸÑÿ™ÿ≠ŸÉŸÖ ÿßŸÑÿ≥ÿ±Ÿäÿπ -->
                <div class="card" style="grid-column: 1 / -1;">
                    <div class="card-title">
                        <span>‚ö°</span>
                        ÿßŸÑÿ™ÿ≠ŸÉŸÖ ÿßŸÑÿ≥ÿ±Ÿäÿπ
                    </div>
                    <div class="control-buttons">
                        <button class="control-btn btn-success" onclick="quickPreset('normal')">
                            <span>‚úì</span>
                            Ÿàÿ∂ÿπ ÿπÿßÿØŸä
                        </button>
                        <button class="control-btn btn-primary" onclick="quickPreset('intensive')">
                            <span>‚ö°</span>
                            Ÿàÿ∂ÿπ ŸÖŸÉÿ´ŸÅ
                        </button>
                        <button class="control-btn btn-warning" onclick="quickPreset('phototherapy')">
                            <span>üí°</span>
                            ÿπŸÑÿßÿ¨ ÿ∂Ÿàÿ¶Ÿä
                        </button>
                        <button class="control-btn btn-danger" onclick="emergencyStop()">
                            <span>‚è∏Ô∏è</span>
                            ÿ•ŸäŸÇÿßŸÅ ÿßŸÑÿ∑Ÿàÿßÿ±ÿ¶
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- ÿ™ÿ®ŸàŸäÿ® ÿßŸÑÿ∞ŸÉÿßÿ° ÿßŸÑÿßÿµÿ∑ŸÜÿßÿπŸä ÿßŸÑÿ∑ÿ®Ÿä -->
        <div id="ai" class="tab-content">
            <!-- ŸÑŸàÿ≠ÿ© ÿßŸÑÿ™ÿ≠ŸÑŸäŸÑ ÿßŸÑÿ¥ÿßŸÖŸÑ -->
            <div class="card" style="grid-column: 1 / -1; background: linear-gradient(135deg, var(--primary), var(--secondary)); color: white;">
                <div class="card-title" style="color: white; border-bottom-color: rgba(255,255,255,0.3);">
                    <span>üß†</span>
                    ŸÜÿ∏ÿßŸÖ ÿßŸÑÿ∞ŸÉÿßÿ° ÿßŸÑÿßÿµÿ∑ŸÜÿßÿπŸä ŸÑŸÑÿ™ŸÜÿ®ÿ§ ÿ®ÿßŸÑŸÖÿÆÿßÿ∑ÿ± ÿßŸÑÿ∑ÿ®Ÿäÿ©
                </div>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-top: 20px;">
                    <div style="text-align: center; padding: 15px; background: rgba(255,255,255,0.1); border-radius: 10px; backdrop-filter: blur(10px);">
                        <div style="font-size: 2.5em; margin-bottom: 5px;" id="aiHealthScore">95</div>
                        <div style="font-size: 0.9em; opacity: 0.9;">ÿØÿ±ÿ¨ÿ© ÿßŸÑÿµÿ≠ÿ© ÿßŸÑÿπÿßŸÖÿ©</div>
                        <div style="font-size: 0.75em; margin-top: 5px; opacity: 0.7;">ŸÖŸÜ 100</div>
                    </div>
                    <div style="text-align: center; padding: 15px; background: rgba(255,255,255,0.1); border-radius: 10px; backdrop-filter: blur(10px);">
                        <div style="font-size: 2.5em; margin-bottom: 5px;" id="aiRiskLevel">ŸÖŸÜÿÆŸÅÿ∂</div>
                        <div style="font-size: 0.9em; opacity: 0.9;">ŸÖÿ≥ÿ™ŸàŸâ ÿßŸÑÿÆÿ∑Ÿàÿ±ÿ©</div>
                        <div style="font-size: 0.75em; margin-top: 5px; opacity: 0.7;">ÿ™ÿ≠ŸÑŸäŸÑ ŸÅŸàÿ±Ÿä</div>
                    </div>
                    <div style="text-align: center; padding: 15px; background: rgba(255,255,255,0.1); border-radius: 10px; backdrop-filter: blur(10px);">
                        <div style="font-size: 2.5em; margin-bottom: 5px;" id="aiPredictions">3</div>
                        <div style="font-size: 0.9em; opacity: 0.9;">ÿ™ŸÜÿ®ÿ§ÿßÿ™ ŸÜÿ¥ÿ∑ÿ©</div>
                        <div style="font-size: 0.75em; margin-top: 5px; opacity: 0.7;">ÿ¢ÿÆÿ± ÿ≥ÿßÿπÿ©</div>
                    </div>
                    <div style="text-align: center; padding: 15px; background: rgba(255,255,255,0.1); border-radius: 10px; backdrop-filter: blur(10px);">
                        <div style="font-size: 2.5em; margin-bottom: 5px;" id="aiAccuracy">98%</div>
                        <div style="font-size: 0.9em; opacity: 0.9;">ÿØŸÇÿ© ÿßŸÑŸÜŸÖŸàÿ∞ÿ¨</div>
                        <div style="font-size: 0.75em; margin-top: 5px; opacity: 0.7;">ŸÖÿπÿ™ŸÖÿØ ÿ∑ÿ®ŸäÿßŸã</div>
                    </div>
                </div>
                <button class="control-btn btn-success" onclick="runAIAnalysis()" style="margin-top: 20px; width: 100%;">
                    <span>üî¨</span>
                    ÿ™ÿ¥ÿ∫ŸäŸÑ ÿßŸÑÿ™ÿ≠ŸÑŸäŸÑ ÿßŸÑÿ¥ÿßŸÖŸÑ ÿßŸÑÿ¢ŸÜ
                </button>
            </div>

            <div class="grid">
                <!-- ÿßŸÑÿ™ŸÜÿ®ÿ§ ÿ®ÿßŸÑŸÖÿÆÿßÿ∑ÿ± -->
                <div class="card">
                    <div class="card-title">
                        <span>‚ö†Ô∏è</span>
                        ÿßŸÑÿ™ŸÜÿ®ÿ§ ÿ®ÿßŸÑŸÖÿÆÿßÿ∑ÿ± ÿßŸÑŸÖÿ≠ÿ™ŸÖŸÑÿ©
                    </div>
                    <div id="aiRiskPredictions">
                        <!-- ÿ≥ÿ™ÿ∏Ÿáÿ± ÿßŸÑÿ™ŸÜÿ®ÿ§ÿßÿ™ ŸáŸÜÿß -->
                    </div>
                    <button class="control-btn btn-primary" onclick="predictRisks()" style="margin-top: 15px; width: 100%;">
                        <span>üîÆ</span>
                        ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ™ŸÜÿ®ÿ§ÿßÿ™
                    </button>
                </div>

                <!-- ŸÖÿ±ÿßŸÇÿ®ÿ© ÿßŸÑÿ£ŸÜŸÖÿßÿ∑ ÿßŸÑÿ≠ŸäŸàŸäÿ© -->
                <div class="card">
                    <div class="card-title">
                        <span>üìä</span>
                        ÿ™ÿ≠ŸÑŸäŸÑ ÿßŸÑÿ£ŸÜŸÖÿßÿ∑ ÿßŸÑÿ≠ŸäŸàŸäÿ©
                    </div>
                    <div id="aiPatternAnalysis">
                        <!-- ÿ™ÿ≠ŸÑŸäŸÑ ÿßŸÑÿ£ŸÜŸÖÿßÿ∑ -->
                    </div>
                </div>

                <!-- ÿ™ŸàÿµŸäÿßÿ™ ÿßŸÑÿ∞ŸÉÿßÿ° ÿßŸÑÿßÿµÿ∑ŸÜÿßÿπŸä -->
                <div class="card" style="grid-column: 1 / -1;">
                    <div class="card-title">
                        <span>üí°</span>
                        ÿ™ŸàÿµŸäÿßÿ™ ÿßŸÑÿ∞ŸÉÿßÿ° ÿßŸÑÿßÿµÿ∑ŸÜÿßÿπŸä
                    </div>
                    <div id="aiRecommendations">
                        <!-- ÿßŸÑÿ™ŸàÿµŸäÿßÿ™ ÿßŸÑÿ∞ŸÉŸäÿ© -->
                    </div>
                </div>

                <!-- ŸÜŸÖŸàÿ∞ÿ¨ ÿßŸÑÿ™ÿπŸÑŸÖ ÿßŸÑÿπŸÖŸäŸÇ -->
                <div class="card">
                    <div class="card-title">
                        <span>üß¨</span>
                        ŸÜŸÖŸàÿ∞ÿ¨ ÿßŸÑÿ™ÿπŸÑŸÖ ÿßŸÑÿπŸÖŸäŸÇ
                    </div>
                    <div class="ai-model-info">
                        <div class="model-stat">
                            <div class="model-label">ŸÜŸàÿπ ÿßŸÑŸÜŸÖŸàÿ∞ÿ¨:</div>
                            <div class="model-value">Neural Network (LSTM)</div>
                        </div>
                        <div class="model-stat">
                            <div class="model-label">ÿπÿØÿØ ÿßŸÑÿ∑ÿ®ŸÇÿßÿ™:</div>
                            <div class="model-value">12 ÿ∑ÿ®ŸÇÿ©</div>
                        </div>
                        <div class="model-stat">
                            <div class="model-label">ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿØÿ±ÿ®ÿ©:</div>
                            <div class="model-value">50,000+ ÿ≠ÿßŸÑÿ©</div>
                        </div>
                        <div class="model-stat">
                            <div class="model-label">ÿ¢ÿÆÿ± ÿ™ÿØÿ±Ÿäÿ®:</div>
                            <div class="model-value" id="lastTraining">2025-01-15</div>
                        </div>
                    </div>
                    <div class="progress-container" style="margin-top: 15px;">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 8px; font-size: 0.9em;">
                            <span>ÿØŸÇÿ© ÿßŸÑÿ™ŸÜÿ®ÿ§</span>
                            <span id="modelAccuracy">98.5%</span>
                        </div>
                        <div style="width: 100%; height: 20px; background: #e0e0e0; border-radius: 10px; overflow: hidden;">
                            <div style="width: 98.5%; height: 100%; background: linear-gradient(90deg, var(--success), #059669); transition: width 1s;"></div>
                        </div>
                    </div>
                </div>

                <!-- ÿ™ÿ≠ŸÑŸäŸÑ ÿßŸÑÿ•ŸÜÿ∞ÿßÿ± ÿßŸÑŸÖÿ®ŸÉÿ± -->
                <div class="card">
                    <div class="card-title">
                        <span>üö®</span>
                        ŸÜÿ∏ÿßŸÖ ÿßŸÑÿ•ŸÜÿ∞ÿßÿ± ÿßŸÑŸÖÿ®ŸÉÿ±
                    </div>
                    <div id="earlyWarningSystem">
                        <!-- ÿ™ŸÜÿ®ŸäŸáÿßÿ™ ÿßŸÑÿ•ŸÜÿ∞ÿßÿ± ÿßŸÑŸÖÿ®ŸÉÿ± -->
                    </div>
                    <div style="margin-top: 15px; padding: 12px; background: #e3f2fd; border-radius: 8px; border-right: 4px solid #2196f3;">
                        <small style="color: #1565c0;">
                            <strong>‚ÑπÔ∏è ŸÖÿπŸÑŸàŸÖÿ©:</strong> ŸäŸÇŸàŸÖ ÿßŸÑŸÜÿ∏ÿßŸÖ ÿ®ÿ™ÿ≠ŸÑŸäŸÑ 50+ ŸÖÿπÿßŸÖŸÑ ÿ≠ŸäŸàŸä ŸÉŸÑ ÿ´ÿßŸÜŸäÿ© ŸÑŸÑŸÉÿ¥ŸÅ ÿßŸÑŸÖÿ®ŸÉÿ± ÿπŸÜ ÿ£Ÿä ŸÖÿ§ÿ¥ÿ±ÿßÿ™ ÿÆÿ∑ÿ±.
                        </small>
                    </div>
                </div>

                <!-- ÿßŸÑÿ™ŸÜÿ®ÿ§ ÿ®ÿßŸÑÿ≠ÿßŸÑÿßÿ™ ÿßŸÑÿ≠ÿ±ÿ¨ÿ© -->
                <div class="card" style="grid-column: 1 / -1;">
                    <div class="card-title">
                        <span>üî¥</span>
                        ÿßŸÑÿ™ŸÜÿ®ÿ§ ÿ®ÿßŸÑÿ≠ÿßŸÑÿßÿ™ ÿßŸÑÿ≠ÿ±ÿ¨ÿ© (Sepsis & NEC)
                    </div>
                    <div class="grid" style="grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));">
                        <!-- ÿ™ÿπŸÅŸÜ ÿßŸÑÿØŸÖ (Sepsis) -->
                        <div class="critical-prediction-card">
                            <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 15px;">
                                <div style="font-size: 2em;">ü¶†</div>
                                <div>
                                    <div style="font-weight: bold; font-size: 1.1em;">ÿ™ÿπŸÅŸÜ ÿßŸÑÿØŸÖ (Sepsis)</div>
                                    <div style="font-size: 0.85em; opacity: 0.7;">ÿßÿ≠ÿ™ŸÖÿßŸÑŸäÿ© ÿÆŸÑÿßŸÑ 24 ÿ≥ÿßÿπÿ©</div>
                                </div>
                            </div>
                            <div class="risk-meter">
                                <div class="risk-meter-bar" id="sepsisRisk" style="width: 5%;"></div>
                            </div>
                            <div style="text-align: center; margin-top: 10px; font-size: 1.5em; font-weight: bold; color: var(--success);" id="sepsisPercent">5%</div>
                            <div style="margin-top: 10px; font-size: 0.85em; opacity: 0.8;">
                                <strong>ÿßŸÑŸÖÿ§ÿ¥ÿ±ÿßÿ™ ÿßŸÑŸÖÿ±ÿßŸÇÿ®ÿ©:</strong> ÿØÿ±ÿ¨ÿ© ÿßŸÑÿ≠ÿ±ÿßÿ±ÿ©ÿå ŸÉÿ±Ÿäÿßÿ™ ÿßŸÑÿØŸÖ ÿßŸÑÿ®Ÿäÿ∂ÿßÿ°ÿå C-reactive proteinÿå ŸÖÿπÿØŸÑ ÿ∂ÿ±ÿ®ÿßÿ™ ÿßŸÑŸÇŸÑÿ®
                            </div>
                        </div>

                        <!-- ÿßŸÑÿ™Ÿáÿßÿ® ÿßŸÑÿ£ŸÖÿπÿßÿ° (NEC) -->
                        <div class="critical-prediction-card">
                            <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 15px;">
                                <div style="font-size: 2em;">ü´É</div>
                                <div>
                                    <div style="font-weight: bold; font-size: 1.1em;">ÿßŸÑÿ™Ÿáÿßÿ® ÿßŸÑÿ£ŸÖÿπÿßÿ° ÿßŸÑŸÜÿßÿÆÿ± (NEC)</div>
                                    <div style="font-size: 0.85em; opacity: 0.7;">ÿßÿ≠ÿ™ŸÖÿßŸÑŸäÿ© ÿÆŸÑÿßŸÑ 48 ÿ≥ÿßÿπÿ©</div>
                                </div>
                            </div>
                            <div class="risk-meter">
                                <div class="risk-meter-bar" id="necRisk" style="width: 8%;"></div>
                            </div>
                            <div style="text-align: center; margin-top: 10px; font-size: 1.5em; font-weight: bold; color: var(--success);" id="necPercent">8%</div>
                            <div style="margin-top: 10px; font-size: 0.85em; opacity: 0.8;">
                                <strong>ÿßŸÑŸÖÿ§ÿ¥ÿ±ÿßÿ™ ÿßŸÑŸÖÿ±ÿßŸÇÿ®ÿ©:</strong> ÿßŸÜÿ™ŸÅÿßÿÆ ÿßŸÑÿ®ÿ∑ŸÜÿå ÿßŸÑŸÇŸäÿ°ÿå ÿ®ÿ±ÿßÿ≤ ÿØŸÖŸàŸäÿå ÿπÿØŸÖ ÿ™ÿ≠ŸÖŸÑ ÿßŸÑÿ±ÿ∂ÿßÿπÿ©
                            </div>
                        </div>

                        <!-- ŸÖÿ™ŸÑÿßÿ≤ŸÖÿ© ÿßŸÑÿ∂ÿßÿ¶ŸÇÿ© ÿßŸÑÿ™ŸÜŸÅÿ≥Ÿäÿ© (RDS) -->
                        <div class="critical-prediction-card">
                            <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 15px;">
                                <div style="font-size: 2em;">ü´Å</div>
                                <div>
                                    <div style="font-weight: bold; font-size: 1.1em;">ÿßŸÑÿ∂ÿßÿ¶ŸÇÿ© ÿßŸÑÿ™ŸÜŸÅÿ≥Ÿäÿ© (RDS)</div>
                                    <div style="font-size: 0.85em; opacity: 0.7;">ŸÖÿ≥ÿ™ŸàŸâ ÿßŸÑÿÆÿ∑Ÿàÿ±ÿ© ÿßŸÑÿ≠ÿßŸÑŸä</div>
                                </div>
                            </div>
                            <div class="risk-meter">
                                <div class="risk-meter-bar" id="rdsRisk" style="width: 12%;"></div>
                            </div>
                            <div style="text-align: center; margin-top: 10px; font-size: 1.5em; font-weight: bold; color: var(--success);" id="rdsPercent">12%</div>
                            <div style="margin-top: 10px; font-size: 0.85em; opacity: 0.8;">
                                <strong>ÿßŸÑŸÖÿ§ÿ¥ÿ±ÿßÿ™ ÿßŸÑŸÖÿ±ÿßŸÇÿ®ÿ©:</strong> SpO2ÿå ŸÖÿπÿØŸÑ ÿßŸÑÿ™ŸÜŸÅÿ≥ÿå ÿµÿπŸàÿ®ÿ© ÿßŸÑÿ™ŸÜŸÅÿ≥ÿå ÿßŸÑÿ£ŸÉÿ≥ÿ¨ÿ©
                            </div>
                        </div>

                        <!-- ŸÜÿ≤ŸäŸÅ ÿØÿßÿÆŸÑ ÿßŸÑÿ®ÿ∑ŸäŸÜÿßÿ™ (IVH) -->
                        <div class="critical-prediction-card">
                            <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 15px;">
                                <div style="font-size: 2em;">üß†</div>
                                <div>
                                    <div style="font-weight: bold; font-size: 1.1em;">ŸÜÿ≤ŸäŸÅ ÿßŸÑÿ®ÿ∑ŸäŸÜÿßÿ™ ÿßŸÑÿØŸÖÿßÿ∫Ÿäÿ© (IVH)</div>
                                    <div style="font-size: 0.85em; opacity: 0.7;">ÿ™ŸÇŸäŸäŸÖ ÿπÿµÿ®Ÿä ŸÖÿ™ŸÇÿØŸÖ</div>
                                </div>
                            </div>
                            <div class="risk-meter">
                                <div class="risk-meter-bar" id="ivhRisk" style="width: 6%;"></div>
                            </div>
                            <div style="text-align: center; margin-top: 10px; font-size: 1.5em; font-weight: bold; color: var(--success);" id="ivhPercent">6%</div>
                            <div style="margin-top: 10px; font-size: 0.85em; opacity: 0.8;">
                                <strong>ÿßŸÑŸÖÿ§ÿ¥ÿ±ÿßÿ™ ÿßŸÑŸÖÿ±ÿßŸÇÿ®ÿ©:</strong> ÿßÿ≥ÿ™ŸÇÿ±ÿßÿ± ÿ∂ÿ∫ÿ∑ ÿßŸÑÿØŸÖÿå ÿßŸÑÿ™ÿ¥ŸÜÿ¨ÿßÿ™ÿå ÿßŸÜÿÆŸÅÿßÿ∂ ÿßŸÑŸÜÿ¥ÿßÿ∑ÿå ÿßŸÑŸäÿßŸÅŸàÿÆ ÿßŸÑŸÖŸÜÿ™ŸÅÿÆ
                            </div>
                        </div>
                    </div>
                    <button class="control-btn btn-danger" onclick="runCriticalAnalysis()" style="margin-top: 20px; width: 100%;">
                        <span>üî¨</span>
                        ÿ™ÿ¥ÿ∫ŸäŸÑ ÿßŸÑÿ™ÿ≠ŸÑŸäŸÑ ÿßŸÑÿπŸÖŸäŸÇ ŸÑŸÑÿ≠ÿßŸÑÿßÿ™ ÿßŸÑÿ≠ÿ±ÿ¨ÿ©
                    </button>
                </div>

                <!-- ŸÖÿ±ÿßŸÇÿ®ÿ© ÿßŸÑÿ™ÿ∑Ÿàÿ± ÿßŸÑŸÜŸÖÿßÿ¶Ÿä -->
                <div class="card" style="grid-column: 1 / -1;">
                    <div class="card-title">
                        <span>üìà</span>
                        ŸÖÿ±ÿßŸÇÿ®ÿ© ÿßŸÑÿ™ÿ∑Ÿàÿ± ÿßŸÑŸÜŸÖÿßÿ¶Ÿä ÿ®ÿßŸÑÿ∞ŸÉÿßÿ° ÿßŸÑÿßÿµÿ∑ŸÜÿßÿπŸä
                    </div>
                    <div class="development-tracking">
                        <div class="development-chart" id="developmentChart">
                            <canvas id="developmentCanvas"></canvas>
                        </div>
                        <div class="development-milestones">
                            <h4 style="margin-bottom: 15px; color: var(--primary);">ÿßŸÑŸÖÿπÿßŸÑŸÖ ÿßŸÑÿ™ÿ∑Ÿàÿ±Ÿäÿ© ÿßŸÑŸÖÿ™ŸàŸÇÿπÿ©</h4>
                            <div id="milestonesList"></div>
                        </div>
                    </div>
                </div>

                <!-- ÿ≥ÿ¨ŸÑ ÿßŸÑÿ™ÿ≠ŸÑŸäŸÑÿßÿ™ -->
                <div class="card" style="grid-column: 1 / -1;">
                    <div class="card-title">
                        <span>üìú</span>
                        ÿ≥ÿ¨ŸÑ ÿ™ÿ≠ŸÑŸäŸÑÿßÿ™ ÿßŸÑÿ∞ŸÉÿßÿ° ÿßŸÑÿßÿµÿ∑ŸÜÿßÿπŸä
                        <button class="btn-small btn-warning" onclick="exportAIReport()" style="margin-right: auto;">
                            üì• ÿ™ÿµÿØŸäÿ± ÿ™ŸÇÿ±Ÿäÿ± ÿ¥ÿßŸÖŸÑ
                        </button>
                    </div>
                    <div class="ai-history-list" id="aiHistoryList">
                        <!-- ÿ≥ÿ¨ŸÑ ÿßŸÑÿ™ÿ≠ŸÑŸäŸÑÿßÿ™ -->
                    </div>
                </div>
            </div>
        </div>

        <!-- ÿ™ÿ®ŸàŸäÿ® ÿßŸÑÿ±ÿ≥ŸàŸÖ ÿßŸÑÿ®ŸäÿßŸÜŸäÿ© -->
        <div id="charts" class="tab-content">
            <div class="grid grid-2">
                <div class="card">
                    <div class="card-title">
                        <span>üìà</span>
                        ÿØÿ±ÿ¨ÿ© ÿßŸÑÿ≠ÿ±ÿßÿ±ÿ© (24 ÿ≥ÿßÿπÿ©)
                    </div>
                    <div class="chart-container">
                        <canvas id="tempChart"></canvas>
                    </div>
                </div>
                <div class="card">
                    <div class="card-title">
                        <span>üìà</span>
                        ŸÜÿ®ÿ∂ÿßÿ™ ÿßŸÑŸÇŸÑÿ® (24 ÿ≥ÿßÿπÿ©)
                    </div>
                    <div class="chart-container">
                        <canvas id="heartChart"></canvas>
                    </div>
                </div>
                <div class="card">
                    <div class="card-title">
                        <span>üìà</span>
                        ÿßŸÑÿ£ŸÉÿ≥ÿ¨ŸäŸÜ (24 ÿ≥ÿßÿπÿ©)
                    </div>
                    <div class="chart-container">
                        <canvas id="oxygenChart"></canvas>
                    </div>
                </div>
                <div class="card">
                    <div class="card-title">
                        <span>üìà</span>
                        ÿßŸÑÿ±ÿ∑Ÿàÿ®ÿ© (24 ÿ≥ÿßÿπÿ©)
                    </div>
                    <div class="chart-container">
                        <canvas id="humidityChart"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <!-- ÿ™ÿ®ŸàŸäÿ® ÿßŸÑÿ™ŸÜÿ®ŸäŸáÿßÿ™ -->
        <div id="alerts" class="tab-content">
            <div class="grid">
                <div class="card" style="grid-column: 1 / -1;">
                    <div class="card-title">
                        <span>üîî</span>
                        ÿ≥ÿ¨ŸÑ ÿßŸÑÿ™ŸÜÿ®ŸäŸáÿßÿ™
                    </div>
                    <div class="alerts-list" id="alertsList">
                        <div class="alert-item alert-info">
                            <div class="alert-icon">‚ÑπÔ∏è</div>
                            <div class="alert-content">
                                <strong>ŸÖÿπŸÑŸàŸÖÿ©:</strong> ÿ¨ŸÖŸäÿπ ÿßŸÑŸÖÿπÿßŸäŸäÿ± ÿ∂ŸÖŸÜ ÿßŸÑŸÖÿØŸâ ÿßŸÑÿ∑ÿ®ŸäÿπŸä
                            </div>
                            <div class="alert-time">ÿßŸÑÿ¢ŸÜ</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ÿ™ÿ®ŸàŸäÿ® ŸÖŸÑÿßÿ≠ÿ∏ÿßÿ™ ÿßŸÑŸÖŸÖÿ±ÿ∂ÿßÿ™ -->
        <div id="notes" class="tab-content">
            <div class="grid">
                <div class="card" style="grid-column: 1 / -1;">
                    <div class="card-title">
                        <span>üìù</span>
                        ÿ•ÿ∂ÿßŸÅÿ© ŸÖŸÑÿßÿ≠ÿ∏ÿ© ÿ¨ÿØŸäÿØÿ©
                    </div>
                    <div class="add-note-form">
                        <div class="form-group">
                            <label>ÿßÿ≥ŸÖ ÿßŸÑŸÖŸÖÿ±ÿ∂ÿ©/ÿßŸÑŸÖŸÖÿ±ÿ∂:</label>
                            <input type="text" class="form-input" id="nurseName" placeholder="ÿ£ÿØÿÆŸÑ ÿßŸÑÿßÿ≥ŸÖ">
                        </div>
                        <div class="form-group">
                            <label>ŸÜŸàÿπ ÿßŸÑŸÖŸÑÿßÿ≠ÿ∏ÿ©:</label>
                            <select class="form-select" id="noteCategory">
                                <option value="vital">ŸÖÿ§ÿ¥ÿ±ÿßÿ™ ÿ≠ŸäŸàŸäÿ©</option>
                                <option value="feeding">ÿ™ÿ∫ÿ∞Ÿäÿ©</option>
                                <option value="medication">ÿØŸàÿßÿ°</option>
                                <option value="observation">ŸÖŸÑÿßÿ≠ÿ∏ÿ© ÿπÿßŸÖÿ©</option>
                                <option value="general">ÿπÿßŸÖ</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>ÿßŸÑŸÖŸÑÿßÿ≠ÿ∏ÿ©:</label>
                            <textarea class="form-textarea" id="noteContent" placeholder="ÿßŸÉÿ™ÿ® ÿßŸÑŸÖŸÑÿßÿ≠ÿ∏ÿ© ŸáŸÜÿß..."></textarea>
                        </div>
                        <button class="control-btn btn-primary" onclick="addNote()">
                            <span>‚ûï</span>
                            ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑŸÖŸÑÿßÿ≠ÿ∏ÿ©
                        </button>
                    </div>
                </div>

                <div class="card" style="grid-column: 1 / -1;">
                    <div class="card-title">
                        <span>üìã</span>
                        ÿ≥ÿ¨ŸÑ ÿßŸÑŸÖŸÑÿßÿ≠ÿ∏ÿßÿ™
                        <button class="btn-small btn-warning" onclick="exportNotes()" style="margin-right: auto;">
                            üì• ÿ™ÿµÿØŸäÿ±
                        </button>
                    </div>
                    <div class="notes-container" id="notesContainer">
                        <!-- ÿßŸÑŸÖŸÑÿßÿ≠ÿ∏ÿßÿ™ ÿ≥ÿ™ÿ∏Ÿáÿ± ŸáŸÜÿß -->
                    </div>
                </div>
            </div>
        </div>

        <!-- ÿ™ÿ®ŸàŸäÿ® Arduino ŸàŸÇÿßÿπÿØÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ -->
        <div id="arduino" class="tab-content">
            <div class="grid">
                <!-- ÿßÿ™ÿµÿßŸÑ Arduino -->
                <div class="card">
                    <div class="card-title">
                        <span>üîå</span>
                        ÿßÿ™ÿµÿßŸÑ Arduino
                    </div>
                    <div class="connection-panel">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                            <h3>ÿ≠ÿßŸÑÿ© ÿßŸÑÿßÿ™ÿµÿßŸÑ:</h3>
                            <span class="status-indicator status-disconnected" id="arduinoStatus">
                                <span class="status-dot-animated"></span>
                                ÿ∫Ÿäÿ± ŸÖÿ™ÿµŸÑ
                            </span>
                        </div>
                        
                        <div class="form-group">
                            <label>ÿπŸÜŸàÿßŸÜ IP ŸÑŸÄ Arduino:</label>
                            <input type="text" class="form-input" id="arduinoIP" placeholder="192.168.1.100" value="192.168.1.100">
                        </div>
                        
                        <div class="form-group">
                            <label>ÿßŸÑŸÖŸÜŸÅÿ∞ (Port):</label>
                            <input type="text" class="form-input" id="arduinoPort" placeholder="80" value="80">
                        </div>
                        
                        <div class="control-buttons" style="grid-template-columns: 1fr 1fr;">
                            <button class="control-btn btn-success" onclick="connectArduino()">
                                <span>üîó</span>
                                ÿßÿ™ÿµÿßŸÑ
                            </button>
                            <button class="control-btn btn-danger" onclick="disconnectArduino()">
                                <span>‚úñÔ∏è</span>
                                ŸÇÿ∑ÿπ ÿßŸÑÿßÿ™ÿµÿßŸÑ
                            </button>
                        </div>
                        
                        <div class="last-sync" id="arduinoLastSync">
                            ÿ¢ÿÆÿ± ŸÖÿ≤ÿßŸÖŸÜÿ©: ŸÑŸÖ Ÿäÿ™ŸÖ ÿßŸÑÿßÿ™ÿµÿßŸÑ ÿ®ÿπÿØ
                        </div>
                    </div>
                    
                    <div class="arduino-sensors">
                        <div class="arduino-sensor-card">
                            <div>üå°Ô∏è ÿØÿ±ÿ¨ÿ© ÿßŸÑÿ≠ÿ±ÿßÿ±ÿ©</div>
                            <div class="sensor-reading" id="arduinoTemp">--</div>
                            <div style="font-size: 0.9em;">¬∞C</div>
                        </div>
                        <div class="arduino-sensor-card">
                            <div>üíß ÿßŸÑÿ±ÿ∑Ÿàÿ®ÿ©</div>
                            <div class="sensor-reading" id="arduinoHum">--</div>
                            <div style="font-size: 0.9em;">%</div>
                        </div>
                        <div class="arduino-sensor-card">
                            <div>‚ù§Ô∏è ŸÜÿ®ÿ∂ÿßÿ™ ÿßŸÑŸÇŸÑÿ®</div>
                            <div class="sensor-reading" id="arduinoHeart">--</div>
                            <div style="font-size: 0.9em;">bpm</div>
                        </div>
                        <div class="arduino-sensor-card">
                            <div>ü´Å ÿßŸÑÿ£ŸÉÿ≥ÿ¨ŸäŸÜ</div>
                            <div class="sensor-reading" id="arduinoOxygen">--</div>
                            <div style="font-size: 0.9em;">%</div>
                        </div>
                    </div>
                </div>

                <!-- ŸÇÿßÿπÿØÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ -->
                <div class="card">
                    <div class="card-title">
                        <span>üíæ</span>
                        ŸÇÿßÿπÿØÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ≠ŸÑŸäÿ©
                    </div>
                    <div class="connection-panel">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                            <h3>ÿ≠ÿßŸÑÿ© ŸÇÿßÿπÿØÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™:</h3>
                            <span class="status-indicator status-connected" id="dbStatus">
                                <span class="status-dot-animated"></span>
                                ŸÖÿ™ÿµŸÑ
                            </span>
                        </div>
                        
                        <div class="db-stats">
                            <div class="db-stat-item">
                                <div class="db-stat-value" id="dbRecords">0</div>
                                <div class="db-stat-label">ÿ≥ÿ¨ŸÑÿßÿ™ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™</div>
                            </div>
                            <div class="db-stat-item">
                                <div class="db-stat-value" id="dbNotes">0</div>
                                <div class="db-stat-label">ÿßŸÑŸÖŸÑÿßÿ≠ÿ∏ÿßÿ™</div>
                            </div>
                            <div class="db-stat-item">
                                <div class="db-stat-value" id="dbSize">0</div>
                                <div class="db-stat-label">ÿßŸÑÿ≠ÿ¨ŸÖ (KB)</div>
                            </div>
                        </div>
                        
                        <div class="control-buttons" style="grid-template-columns: 1fr 1fr; margin-top: 20px;">
                            <button class="control-btn btn-primary" onclick="backupDatabase()">
                                <span>üíæ</span>
                                ŸÜÿ≥ÿÆ ÿßÿ≠ÿ™Ÿäÿßÿ∑Ÿä
                            </button>
                            <button class="control-btn btn-warning" onclick="clearDatabase()">
                                <span>üóëÔ∏è</span>
                                ŸÖÿ≥ÿ≠ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™
                            </button>
                        </div>
                        
                        <div class="last-sync" id="dbLastUpdate">
                            ÿ¢ÿÆÿ± ÿ™ÿ≠ÿØŸäÿ´: --
                        </div>
                    </div>
                </div>

                <!-- ÿ≥ÿ¨ŸÑ ÿßŸÑÿßÿ™ÿµÿßŸÑ -->
                <div class="card" style="grid-column: 1 / -1;">
                    <div class="card-title">
                        <span>üì°</span>
                        ÿ≥ÿ¨ŸÑ ÿßŸÑÿßÿ™ÿµÿßŸÑ ŸàÿßŸÑŸÖÿ≤ÿßŸÖŸÜÿ©
                    </div>
                    <div class="alerts-list" id="connectionLog">
                        <div class="alert-item alert-info">
                            <div class="alert-icon">‚ÑπÔ∏è</div>
                            <div class="alert-content">
                                <strong>ŸÖÿπŸÑŸàŸÖÿ©:</strong> ŸÇÿßÿπÿØÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ≠ŸÑŸäÿ© ÿ¨ÿßŸáÿ≤ÿ©
                            </div>
                            <div class="alert-time">ÿßŸÑÿ¢ŸÜ</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ÿ™ÿ®ŸàŸäÿ® ÿßŸÑÿ•ÿπÿØÿßÿØÿßÿ™ (ŸÖŸàÿ≠ŸëÿØ) -->
        <div id="settings" class="tab-content">
            <div class="grid">
                <!-- ÿ≠ÿØŸàÿØ ÿßŸÑÿ™ŸÜÿ®ŸäŸá -->
                <div class="card">
                    <div class="card-title">
                        <span>‚öôÔ∏è</span>
                        ÿ≠ÿØŸàÿØ ÿßŸÑÿ™ŸÜÿ®ŸäŸá
                    </div>
                    <div class="slider-container">
                        <div class="slider-header">
                            <span>ÿ≠ÿØ ÿßŸÑÿ≠ÿ±ÿßÿ±ÿ© ÿßŸÑÿ£ÿØŸÜŸâ</span>
                            <span class="slider-value" id="tempMinValue">36.0¬∞C</span>
                        </div>
                        <input type="range" class="slider" min="35" max="37" step="0.5" value="36" 
                               id="tempMin" oninput="updateTempMin(this.value)">
                    </div>
                    <div class="slider-container">
                        <div class="slider-header">
                            <span>ÿ≠ÿØ ÿßŸÑÿ≠ÿ±ÿßÿ±ÿ© ÿßŸÑÿ£ÿπŸÑŸâ</span>
                            <span class="slider-value" id="tempMaxValue">37.5¬∞C</span>
                        </div>
                        <input type="range" class="slider" min="37" max="39" step="0.5" value="37.5" 
                               id="tempMax" oninput="updateTempMax(this.value)">
                    </div>
                </div>

                <!-- ÿ•ÿπÿØÿßÿØÿßÿ™ ÿßŸÑÿßÿ™ÿµÿßŸÑ -->
                <div class="card">
                    <div class="card-title">
                        <span>üåê</span>
                        ÿ•ÿπÿØÿßÿØÿßÿ™ ÿßŸÑÿßÿ™ÿµÿßŸÑ
                    </div>
                    <div class="input-group">
                        <label class="input-label">ÿπŸÜŸàÿßŸÜ IP ŸÑŸÑŸÄ WeMos:</label>
                        <input type="text" class="input-field" id="wemosIP" value="192.168.43.251">
                    </div>
                    <button class="control-btn btn-primary" onclick="saveIP()">
                        <span>üíæ</span>
                        ÿ≠ŸÅÿ∏ ÿπŸÜŸàÿßŸÜ IP
                    </button>
                </div>

                <!-- ÿßŸÑÿ´ŸäŸÖÿßÿ™ -->
                <div class="card">
                    <div class="card-title">
                        <span>üé®</span>
                        ÿßŸÑÿ´ŸäŸÖÿßÿ™ (ÿßŸÑŸÖÿ∏Ÿáÿ±)
                    </div>
                    <div class="input-group">
                        <label class="input-label">ÿßÿÆÿ™ÿ± ÿßŸÑÿ´ŸäŸÖ:</label>
                        <select class="input-field" id="themeSelect" onchange="applyTheme()">
                            <option value="light">‚òÄÔ∏è ŸÅÿßÿ™ÿ≠ (Light)</option>
                            <option value="dark">üåô ÿØÿßŸÉŸÜ (Dark)</option>
                            <option value="blue">üíô ÿ£ÿ≤ÿ±ŸÇ (Blue)</option>
                            <option value="green">üíö ÿ£ÿÆÿ∂ÿ± (Green)</option>
                            <option value="purple">üíú ÿ®ŸÜŸÅÿ≥ÿ¨Ÿä (Purple)</option>
                            <option value="orange">üß° ÿ®ÿ±ÿ™ŸÇÿßŸÑŸä (Orange)</option>
                        </select>
                    </div>

                    <div class="theme-preview" id="themePreview">
                        <div style="text-align: center; padding: 20px;">
                            <div style="font-size: 3em; margin-bottom: 10px;">üé®</div>
                            <div>ŸÖÿπÿßŸäŸÜÿ© ÿßŸÑÿ´ŸäŸÖ ÿßŸÑŸÖÿÆÿ™ÿßÿ±</div>
                        </div>
                    </div>

                    <div class="switch-container">
                        <span>ÿ™ŸÅÿπŸäŸÑ ÿßŸÑÿ´ŸäŸÖ ÿßŸÑÿ™ŸÑŸÇÿßÿ¶Ÿä ÿ≠ÿ≥ÿ® ÿßŸÑŸàŸÇÿ™</span>
                        <label class="switch">
                            <input type="checkbox" id="autoTheme" onchange="toggleAutoTheme()">
                            <span class="switch-slider"></span>
                        </label>
                    </div>
                </div>

                <!-- ÿ≠ŸÅÿ∏ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ -->
                <div class="card">
                    <div class="card-title">
                        <span>üíæ</span>
                        ÿ≠ŸÅÿ∏ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™
                    </div>
                    <div class="control-buttons" style="grid-template-columns: 1fr;">
                        <button class="control-btn btn-primary" onclick="exportData()">
                            <span>üì•</span>
                            ÿ™ÿµÿØŸäÿ± ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™
                        </button>
                        <button class="control-btn btn-success" onclick="saveSettings()">
                            <span>üíæ</span>
                            ÿ≠ŸÅÿ∏ ÿßŸÑÿ•ÿπÿØÿßÿØÿßÿ™
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ÿ≤ÿ± ÿßŸÑÿ∑Ÿàÿßÿ±ÿ¶ -->
    <button class="emergency-btn" onclick="emergencyAlert()">
        <span class="emergency-icon">üö®</span>
        <span style="font-size: 0.8em;">ÿ∑Ÿàÿßÿ±ÿ¶</span>
    </button>

    <script>
        // ÿ•ÿπÿØÿßÿØÿßÿ™ ÿßŸÑŸÜÿ∏ÿßŸÖ
        let WEMOS_IP = localStorage.getItem('wemosIP') || '192.168.43.251';
        let ws = null;
        let charts = {};
        let isConnected = false;
        let isRotatingControl = false;
        let currentZoom = 1;
        let uvTimerInterval = null;
        let uvCountdownSeconds = 0;
        let jaundiceTimerInterval = null;
        let jaundiceTimeElapsed = 0;

        // ŸÇÿßÿπÿØÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ≠ŸÑŸäÿ©
        let localDB = {
            notes: [],
            records: [],
            settings: {},
            aiAnalyses: []
        };

        // ŸÖÿ™ÿ∫Ÿäÿ±ÿßÿ™ ÿßŸÑÿ∞ŸÉÿßÿ° ÿßŸÑÿßÿµÿ∑ŸÜÿßÿπŸä
        let aiModel = {
            healthScore: 95,
            riskLevel: 'ŸÖŸÜÿÆŸÅÿ∂',
            predictions: [],
            recommendations: [],
            patterns: [],
            criticalRisks: {
                sepsis: 5,
                nec: 8,
                rds: 12,
                ivh: 6
            }
        };

        // ÿ®ŸäÿßŸÜÿßÿ™ ÿ™ÿßÿ±ŸäÿÆŸäÿ© ŸÑŸÑÿ™ÿ≠ŸÑŸäŸÑ
        let vitalSignsHistory = {
            temperature: [],
            heartRate: [],
            oxygen: [],
            respiration: []
        };

        // ============================================
        // ü§ñ ŸÜÿ∏ÿßŸÖ ÿßŸÑÿ∞ŸÉÿßÿ° ÿßŸÑÿßÿµÿ∑ŸÜÿßÿπŸä ÿßŸÑÿ∑ÿ®Ÿä ÿßŸÑŸÖÿ™ŸÇÿØŸÖ
        // ============================================

        // ÿßŸÑÿ™ÿ≠ŸÑŸäŸÑ ÿßŸÑÿ¥ÿßŸÖŸÑ
        function runAIAnalysis() {
            addAlert('ÿ®ÿØÿ° ÿßŸÑÿ™ÿ≠ŸÑŸäŸÑ ÿßŸÑÿ¥ÿßŸÖŸÑ ÿ®ÿßŸÑÿ∞ŸÉÿßÿ° ÿßŸÑÿßÿµÿ∑ŸÜÿßÿπŸä...', 'info');
            
            // ŸÖÿ≠ÿßŸÉÿßÿ© ÿßŸÑÿ™ÿ≠ŸÑŸäŸÑ
            setTimeout(() => {
                calculateHealthScore();
                predictRisks();
                analyzePatterns();
                generateRecommendations();
                checkEarlyWarnings();
                
                addAlert('ÿßŸÉÿ™ŸÖŸÑ ÿßŸÑÿ™ÿ≠ŸÑŸäŸÑ ÿßŸÑÿ¥ÿßŸÖŸÑ ÿ®ŸÜÿ¨ÿßÿ≠', 'success');
                
                // ÿ≠ŸÅÿ∏ ÿßŸÑÿ™ÿ≠ŸÑŸäŸÑ
                saveAIAnalysis('ÿ™ÿ≠ŸÑŸäŸÑ ÿ¥ÿßŸÖŸÑ', {
                    healthScore: aiModel.healthScore,
                    riskLevel: aiModel.riskLevel,
                    predictions: aiModel.predictions.length,
                    recommendations: aiModel.recommendations.length
                });
            }, 2000);
        }

        // ÿ≠ÿ≥ÿßÿ® ÿØÿ±ÿ¨ÿ© ÿßŸÑÿµÿ≠ÿ© ÿßŸÑÿπÿßŸÖÿ©
        function calculateHealthScore() {
            const temp = parseFloat(document.getElementById('bodyTemp')?.textContent || 36.5);
            const heart = parseInt(document.getElementById('heartRate')?.textContent || 140);
            const oxygen = parseInt(document.getElementById('oxygenLevel')?.textContent || 96);
            const resp = parseInt(document.getElementById('respRate')?.textContent || 45);
            
            let score = 100;
            
            // ÿ™ŸÇŸäŸäŸÖ ÿØÿ±ÿ¨ÿ© ÿßŸÑÿ≠ÿ±ÿßÿ±ÿ©
            if (temp < 36.0 || temp > 37.5) score -= 15;
            else if (temp < 36.3 || temp > 37.2) score -= 5;
            
            // ÿ™ŸÇŸäŸäŸÖ ŸÜÿ®ÿ∂ÿßÿ™ ÿßŸÑŸÇŸÑÿ®
            if (heart < 100 || heart > 180) score -= 15;
            else if (heart < 120 || heart > 160) score -= 5;
            
            // ÿ™ŸÇŸäŸäŸÖ ÿßŸÑÿ£ŸÉÿ≥ÿ¨ŸäŸÜ
            if (oxygen < 90) score -= 20;
            else if (oxygen < 94) score -= 10;
            
            // ÿ™ŸÇŸäŸäŸÖ ÿßŸÑÿ™ŸÜŸÅÿ≥
            if (resp < 30 || resp > 60) score -= 10;
            else if (resp < 35 || resp > 55) score -= 5;
            
            aiModel.healthScore = Math.max(0, Math.min(100, score));
            document.getElementById('aiHealthScore').textContent = aiModel.healthScore;
            
            // ÿ™ÿ≠ÿØŸäÿØ ŸÖÿ≥ÿ™ŸàŸâ ÿßŸÑÿÆÿ∑Ÿàÿ±ÿ©
            if (aiModel.healthScore >= 90) {
                aiModel.riskLevel = 'ŸÖŸÜÿÆŸÅÿ∂';
                document.getElementById('aiRiskLevel').style.color = '#10b981';
            } else if (aiModel.healthScore >= 70) {
                aiModel.riskLevel = 'ŸÖÿ™Ÿàÿ≥ÿ∑';
                document.getElementById('aiRiskLevel').style.color = '#f59e0b';
            } else {
                aiModel.riskLevel = 'ŸÖÿ±ÿ™ŸÅÿπ';
                document.getElementById('aiRiskLevel').style.color = '#ef4444';
            }
            
            document.getElementById('aiRiskLevel').textContent = aiModel.riskLevel;
        }

        // ÿßŸÑÿ™ŸÜÿ®ÿ§ ÿ®ÿßŸÑŸÖÿÆÿßÿ∑ÿ±
        function predictRisks() {
            aiModel.predictions = [];
            
            const temp = parseFloat(document.getElementById('bodyTemp')?.textContent || 36.5);
            const heart = parseInt(document.getElementById('heartRate')?.textContent || 140);
            const oxygen = parseInt(document.getElementById('oxygenLevel')?.textContent || 96);
            
            // ÿ™ŸÜÿ®ÿ§ 1: ÿßŸÜÿÆŸÅÿßÿ∂ ÿØÿ±ÿ¨ÿ© ÿßŸÑÿ≠ÿ±ÿßÿ±ÿ©
            if (temp < 36.5) {
                aiModel.predictions.push({
                    type: 'high',
                    icon: 'üå°Ô∏è',
                    title: 'ÿßÿ≠ÿ™ŸÖÿßŸÑŸäÿ© ÿßŸÜÿÆŸÅÿßÿ∂ ÿ≠ÿ±ÿßÿ±ÿ© ÿßŸÑÿ¨ÿ≥ŸÖ (Hypothermia)',
                    description: 'ÿØÿ±ÿ¨ÿ© ÿßŸÑÿ≠ÿ±ÿßÿ±ÿ© ÿßŸÑÿ≠ÿßŸÑŸäÿ© ÿ£ŸÇŸÑ ŸÖŸÜ ÿßŸÑŸÖÿπÿØŸÑ ÿßŸÑÿ∑ÿ®ŸäÿπŸä. ŸäŸèŸÜÿµÿ≠ ÿ®ÿ≤ŸäÿßÿØÿ© ÿ≠ÿ±ÿßÿ±ÿ© ÿßŸÑÿ≠ÿßÿ∂ŸÜÿ©.',
                    probability: 75
                });
            }
            
            // ÿ™ŸÜÿ®ÿ§ 2: ÿπÿØŸÖ ÿßŸÜÿ™ÿ∏ÿßŸÖ ÿ∂ÿ±ÿ®ÿßÿ™ ÿßŸÑŸÇŸÑÿ®
            if (heart < 120 || heart > 160) {
                aiModel.predictions.push({
                    type: 'medium',
                    icon: '‚ù§Ô∏è',
                    title: 'ÿπÿØŸÖ ÿßŸÜÿ™ÿ∏ÿßŸÖ ŸÖÿ≠ÿ™ŸÖŸÑ ŸÅŸä ÿ∂ÿ±ÿ®ÿßÿ™ ÿßŸÑŸÇŸÑÿ®',
                    description: 'ŸÖÿπÿØŸÑ ÿ∂ÿ±ÿ®ÿßÿ™ ÿßŸÑŸÇŸÑÿ® ÿÆÿßÿ±ÿ¨ ÿßŸÑŸÜÿ∑ÿßŸÇ ÿßŸÑŸÖÿ´ÿßŸÑŸä. ŸäŸèŸÜÿµÿ≠ ÿ®ŸÖÿ±ÿßŸÇÿ®ÿ© ŸÖÿ≥ÿ™ŸÖÿ±ÿ©.',
                    probability: 60
                });
            }
            
            // ÿ™ŸÜÿ®ÿ§ 3: ŸÜŸÇÿµ ÿßŸÑÿ£ŸÉÿ≥ÿ¨ÿ©
            if (oxygen < 95) {
                aiModel.predictions.push({
                    type: 'high',
                    icon: 'ü´Å',
                    title: 'ÿßÿ≠ÿ™ŸÖÿßŸÑŸäÿ© ŸÜŸÇÿµ ÿßŸÑÿ£ŸÉÿ≥ÿ¨ÿ© (Hypoxemia)',
                    description: 'ŸÖÿ≥ÿ™ŸàŸâ ÿßŸÑÿ£ŸÉÿ≥ÿ¨ŸäŸÜ ŸÖŸÜÿÆŸÅÿ∂. ŸÇÿØ Ÿäÿ≠ÿ™ÿßÿ¨ ÿßŸÑÿ∑ŸÅŸÑ ÿ•ŸÑŸâ ÿØÿπŸÖ ÿ™ŸÜŸÅÿ≥Ÿä ÿ•ÿ∂ÿßŸÅŸä.',
                    probability: 70
                });
            }
            
            // ÿ™ŸÜÿ®ÿ§ 4: ÿÆÿ∑ÿ± ÿßŸÑÿ¨ŸÅÿßŸÅ
            const humidity = parseInt(document.getElementById('humidity')?.textContent || 55);
            if (humidity < 50) {
                aiModel.predictions.push({
                    type: 'medium',
                    icon: 'üíß',
                    title: 'ÿßÿ≠ÿ™ŸÖÿßŸÑŸäÿ© ÿßŸÑÿ¨ŸÅÿßŸÅ',
                    description: 'ÿßŸÑÿ±ÿ∑Ÿàÿ®ÿ© ŸÖŸÜÿÆŸÅÿ∂ÿ©. ŸäŸèŸÜÿµÿ≠ ÿ®ÿ≤ŸäÿßÿØÿ© ÿßŸÑÿ™ÿ±ÿ∑Ÿäÿ® ŸÑŸÖŸÜÿπ ÿ¨ŸÅÿßŸÅ ÿßŸÑÿ¨ŸÑÿØ ŸàÿßŸÑŸÖÿ≥ÿßŸÑŸÉ ÿßŸÑÿ™ŸÜŸÅÿ≥Ÿäÿ©.',
                    probability: 55
                });
            }
            
            // ÿ™ŸÜÿ®ÿ§ 5: ÿßÿ≥ÿ™ŸÇÿ±ÿßÿ± ÿ≠ÿßŸÑÿ© ÿ¨ŸäÿØÿ©
            if (aiModel.predictions.length === 0) {
                aiModel.predictions.push({
                    type: 'low',
                    icon: '‚úÖ',
                    title: 'ÿ≠ÿßŸÑÿ© ŸÖÿ≥ÿ™ŸÇÿ±ÿ© ŸàŸÖŸÖÿ™ÿßÿ≤ÿ©',
                    description: 'ÿ¨ŸÖŸäÿπ ÿßŸÑŸÖÿ§ÿ¥ÿ±ÿßÿ™ ÿßŸÑÿ≠ŸäŸàŸäÿ© ÿ∂ŸÖŸÜ ÿßŸÑŸÜÿ∑ÿßŸÇ ÿßŸÑÿ∑ÿ®ŸäÿπŸä. ÿßÿ≥ÿ™ŸÖÿ± ŸÅŸä ÿßŸÑŸÖÿ±ÿßŸÇÿ®ÿ© ÿßŸÑÿ±Ÿàÿ™ŸäŸÜŸäÿ©.',
                    probability: 95
                });
            }
            
            displayRiskPredictions();
            document.getElementById('aiPredictions').textContent = aiModel.predictions.length;
        }

        // ÿπÿ±ÿ∂ ÿßŸÑÿ™ŸÜÿ®ÿ§ÿßÿ™
        function displayRiskPredictions() {
            const container = document.getElementById('aiRiskPredictions');
            
            if (aiModel.predictions.length === 0) {
                container.innerHTML = '<p style="text-align: center; opacity: 0.6; padding: 20px;">ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸÖÿÆÿßÿ∑ÿ± ŸÖÿ≠ÿ™ŸÖŸÑÿ©</p>';
                return;
            }
            
            container.innerHTML = aiModel.predictions.map(pred => `
                <div class="risk-item risk-${pred.type}">
                    <div class="risk-icon">${pred.icon}</div>
                    <div class="risk-content">
                        <div class="risk-title">${pred.title}</div>
                        <div class="risk-description">${pred.description}</div>
                    </div>
                    <div class="risk-probability">${pred.probability}%</div>
                </div>
            `).join('');
        }

        // ÿ™ÿ≠ŸÑŸäŸÑ ÿßŸÑÿ£ŸÜŸÖÿßÿ∑ ÿßŸÑÿ≠ŸäŸàŸäÿ©
        function analyzePatterns() {
            aiModel.patterns = [];
            
            // ŸÜŸÖÿ∑ 1: ÿßÿ≥ÿ™ŸÇÿ±ÿßÿ± ÿØÿ±ÿ¨ÿ© ÿßŸÑÿ≠ÿ±ÿßÿ±ÿ©
            aiModel.patterns.push({
                title: 'ÿßÿ≥ÿ™ŸÇÿ±ÿßÿ± ÿØÿ±ÿ¨ÿ© ÿßŸÑÿ≠ÿ±ÿßÿ±ÿ©',
                value: 'ÿ™ÿ®ÿßŸäŸÜ ŸÖŸÜÿÆŸÅÿ∂ (¬±0.2¬∞C) - ŸÖŸÖÿ™ÿßÿ≤',
                status: 'good'
            });
            
            // ŸÜŸÖÿ∑ 2: ÿ•ŸäŸÇÿßÿπ ÿßŸÑŸÇŸÑÿ®
            aiModel.patterns.push({
                title: 'ÿßŸÜÿ™ÿ∏ÿßŸÖ ÿ∂ÿ±ÿ®ÿßÿ™ ÿßŸÑŸÇŸÑÿ®',
                value: 'ÿ•ŸäŸÇÿßÿπ ÿ¨Ÿäÿ®Ÿä ŸÖŸÜÿ™ÿ∏ŸÖ - ÿ∑ÿ®ŸäÿπŸä',
                status: 'good'
            });
            
            // ŸÜŸÖÿ∑ 3: ÿØŸàÿ±ÿ© ÿßŸÑŸÜŸàŸÖ
            const hour = new Date().getHours();
            const sleepPhase = (hour >= 22 || hour < 6) ? 'ŸÜŸàŸÖ ÿπŸÖŸäŸÇ' : 'ŸäŸÇÿ∏ÿ© ŸÜÿ¥ÿ∑ÿ©';
            aiModel.patterns.push({
                title: 'ÿØŸàÿ±ÿ© ÿßŸÑŸÜŸàŸÖ ŸàÿßŸÑÿßÿ≥ÿ™ŸäŸÇÿßÿ∏',
                value: `${sleepPhase} - ŸÖŸÜÿ™ÿ∏ŸÖ`,
                status: 'good'
            });
            
            // ŸÜŸÖÿ∑ 4: ÿßŸÑÿßÿ≥ÿ™ÿ¨ÿßÿ®ÿ© ŸÑŸÑÿ®Ÿäÿ¶ÿ©
            aiModel.patterns.push({
                title: 'ÿßŸÑÿßÿ≥ÿ™ÿ¨ÿßÿ®ÿ© ŸÑŸÑÿ™ÿ∫Ÿäÿ±ÿßÿ™ ÿßŸÑÿ®Ÿäÿ¶Ÿäÿ©',
                value: 'ÿ™ŸÉŸäŸÅ ÿ≥ÿ±Ÿäÿπ ŸàŸÅÿπÿßŸÑ',
                status: 'good'
            });
            
            displayPatterns();
        }

        // ÿπÿ±ÿ∂ ÿßŸÑÿ£ŸÜŸÖÿßÿ∑
        function displayPatterns() {
            const container = document.getElementById('aiPatternAnalysis');
            
            container.innerHTML = aiModel.patterns.map(pattern => `
                <div class="pattern-item">
                    <div class="pattern-title">${pattern.title}</div>
                    <div class="pattern-value">${pattern.value}</div>
                </div>
            `).join('');
        }

        // ÿ™ŸàŸÑŸäÿØ ÿßŸÑÿ™ŸàÿµŸäÿßÿ™
        function generateRecommendations() {
            aiModel.recommendations = [];
            
            const temp = parseFloat(document.getElementById('bodyTemp')?.textContent || 36.5);
            const oxygen = parseInt(document.getElementById('oxygenLevel')?.textContent || 96);
            const humidity = parseInt(document.getElementById('humidity')?.textContent || 55);
            
            // ÿ™ŸàÿµŸäÿ© 1: ÿØÿ±ÿ¨ÿ© ÿßŸÑÿ≠ÿ±ÿßÿ±ÿ©
            if (temp < 36.3) {
                aiModel.recommendations.push({
                    icon: 'üî•',
                    title: 'ÿ≤ŸäÿßÿØÿ© ÿ≠ÿ±ÿßÿ±ÿ© ÿßŸÑÿ≠ÿßÿ∂ŸÜÿ©',
                    text: 'ŸäŸèŸÜÿµÿ≠ ÿ®ÿ±ŸÅÿπ ÿØÿ±ÿ¨ÿ© ÿ≠ÿ±ÿßÿ±ÿ© ÿßŸÑÿ≠ÿßÿ∂ŸÜÿ© ÿ®ŸÖŸÇÿØÿßÿ± 0.5¬∞C ŸÑÿ™ÿ≠ÿ≥ŸäŸÜ ÿ≠ÿ±ÿßÿ±ÿ© ÿßŸÑÿ¨ÿ≥ŸÖ. ÿ±ÿßŸÇÿ® ŸÉŸÑ 30 ÿØŸÇŸäŸÇÿ©.',
                    priority: 'high'
                });
            }
            
            // ÿ™ŸàÿµŸäÿ© 2: ÿßŸÑÿ£ŸÉÿ≥ÿ¨ŸäŸÜ
            if (oxygen < 95) {
                aiModel.recommendations.push({
                    icon: 'ü´Å',
                    title: 'ÿ™ÿ≠ÿ≥ŸäŸÜ ÿßŸÑÿ£ŸÉÿ≥ÿ¨ÿ©',
                    text: 'ÿ≤ŸäÿßÿØÿ© ÿ™ÿ±ŸÉŸäÿ≤ ÿßŸÑÿ£ŸÉÿ≥ÿ¨ŸäŸÜ ÿ®ŸÜÿ≥ÿ®ÿ© 2-3%. ÿßŸÅÿ≠ÿµ ÿßŸÑŸÖÿ≥ÿßŸÑŸÉ ÿßŸÑÿ™ŸÜŸÅÿ≥Ÿäÿ© Ÿàÿ™ÿ£ŸÉÿØ ŸÖŸÜ Ÿàÿ∂ÿπŸäÿ© ÿßŸÑÿ±ÿ£ÿ≥ ÿßŸÑÿµÿ≠Ÿäÿ≠ÿ©.',
                    priority: 'high'
                });
            }
            
            // ÿ™ŸàÿµŸäÿ© 3: ÿßŸÑÿ±ÿ∑Ÿàÿ®ÿ©
            if (humidity < 55) {
                aiModel.recommendations.push({
                    icon: 'üíß',
                    title: 'ÿ™ÿ≠ÿ≥ŸäŸÜ ÿßŸÑÿ™ÿ±ÿ∑Ÿäÿ®',
                    text: 'ÿ≤ŸäÿßÿØÿ© ŸÖÿ≥ÿ™ŸàŸâ ÿßŸÑÿ±ÿ∑Ÿàÿ®ÿ© ÿ•ŸÑŸâ 60-65% ŸÑÿ≠ŸÖÿßŸäÿ© ÿßŸÑÿ¨ŸÑÿØ ÿßŸÑÿ±ŸÇŸäŸÇ ŸàÿßŸÑŸÖÿ≥ÿßŸÑŸÉ ÿßŸÑÿ™ŸÜŸÅÿ≥Ÿäÿ©.',
                    priority: 'medium'
                });
            }
            
            // ÿ™ŸàÿµŸäÿ© 4: ÿßŸÑÿ™ÿ∫ÿ∞Ÿäÿ©
            aiModel.recommendations.push({
                icon: 'üçº',
                title: 'ŸÖÿ±ÿßÿ¨ÿπÿ© ÿÆÿ∑ÿ© ÿßŸÑÿ™ÿ∫ÿ∞Ÿäÿ©',
                text: 'ÿßŸÑŸàÿ≤ŸÜ Ÿäÿ≤ÿØÿßÿØ ÿ®ÿ¥ŸÉŸÑ ÿ¨ŸäÿØ (+50g/ŸäŸàŸÖ). ÿßÿ≥ÿ™ŸÖÿ± ŸÅŸä ÿßŸÑÿ±ÿ∂ÿßÿπÿ© ÿßŸÑÿ≠ÿßŸÑŸäÿ© ŸÖÿπ ŸÖÿ±ÿßŸÇÿ®ÿ© ÿßŸÑÿ™ÿ≠ŸÖŸÑ ÿßŸÑŸáÿ∂ŸÖŸä.',
                priority: 'low'
            });
            
            // ÿ™ŸàÿµŸäÿ© 5: ÿßŸÑÿπŸÜÿßŸäÿ© ÿ®ÿßŸÑÿ¨ŸÑÿØ
            aiModel.recommendations.push({
                icon: 'üß¥',
                title: 'ÿßŸÑÿπŸÜÿßŸäÿ© ÿ®ÿßŸÑÿ¨ŸÑÿØ',
                text: 'ÿ™ÿ∑ÿ®ŸäŸÇ ŸÖÿ±ÿ∑ÿ® ÿÆŸÅŸäŸÅ ŸÉŸÑ 6 ÿ≥ÿßÿπÿßÿ™. ÿ™ÿ¨ŸÜÿ® ÿßŸÑÿßÿ≠ÿ™ŸÉÿßŸÉ ÿßŸÑŸÖÿ®ÿßÿ¥ÿ± Ÿàÿ™ÿ∫ŸäŸäÿ± Ÿàÿ∂ÿπŸäÿ© ÿßŸÑÿ∑ŸÅŸÑ ÿ®ÿßŸÜÿ™ÿ∏ÿßŸÖ.',
                priority: 'medium'
            });
            
            displayRecommendations();
        }

        // ÿπÿ±ÿ∂ ÿßŸÑÿ™ŸàÿµŸäÿßÿ™
        function displayRecommendations() {
            const container = document.getElementById('aiRecommendations');
            
            container.innerHTML = aiModel.recommendations.map(rec => `
                <div class="recommendation-item">
                    <div class="recommendation-icon">${rec.icon}</div>
                    <div class="recommendation-content">
                        <div class="recommendation-title">${rec.title}</div>
                        <div class="recommendation-text">${rec.text}</div>
                        <span class="recommendation-priority priority-${rec.priority}">
                            ${rec.priority === 'high' ? 'ÿ£ŸàŸÑŸàŸäÿ© ÿπÿßŸÑŸäÿ©' : rec.priority === 'medium' ? 'ÿ£ŸàŸÑŸàŸäÿ© ŸÖÿ™Ÿàÿ≥ÿ∑ÿ©' : 'ÿ£ŸàŸÑŸàŸäÿ© ŸÖŸÜÿÆŸÅÿ∂ÿ©'}
                        </span>
                    </div>
                </div>
            `).join('');
        }

        // ŸÜÿ∏ÿßŸÖ ÿßŸÑÿ•ŸÜÿ∞ÿßÿ± ÿßŸÑŸÖÿ®ŸÉÿ±
        function checkEarlyWarnings() {
            const warnings = [];
            
            const temp = parseFloat(document.getElementById('bodyTemp')?.textContent || 36.5);
            const heart = parseInt(document.getElementById('heartRate')?.textContent || 140);
            const oxygen = parseInt(document.getElementById('oxygenLevel')?.textContent || 96);
            
            // ŸÅÿ≠ÿµ ÿØÿ±ÿ¨ÿ© ÿßŸÑÿ≠ÿ±ÿßÿ±ÿ©
            if (temp < 36.0) {
                warnings.push({
                    icon: 'üå°Ô∏è',
                    title: 'ÿ•ŸÜÿ∞ÿßÿ±: ÿßŸÜÿÆŸÅÿßÿ∂ ÿÆÿ∑Ÿäÿ± ŸÅŸä ÿØÿ±ÿ¨ÿ© ÿßŸÑÿ≠ÿ±ÿßÿ±ÿ©',
                    description: 'ÿØÿ±ÿ¨ÿ© ÿßŸÑÿ≠ÿ±ÿßÿ±ÿ© ÿ£ŸÇŸÑ ŸÖŸÜ 36¬∞C. ÿ™ÿØÿÆŸÑ ÿ∑ÿ®Ÿä ŸÅŸàÿ±Ÿä ŸÖÿ∑ŸÑŸàÿ®.'
                });
            }
            
            // ŸÅÿ≠ÿµ ÿßŸÑÿ£ŸÉÿ≥ÿ¨ŸäŸÜ
            if (oxygen < 90) {
                warnings.push({
                    icon: 'ü´Å',
                    title: 'ÿ•ŸÜÿ∞ÿßÿ±: ŸÜŸÇÿµ ÿ≠ÿßÿØ ŸÅŸä ÿßŸÑÿ£ŸÉÿ≥ÿ¨ÿ©',
                    description: 'ŸÖÿ≥ÿ™ŸàŸâ SpO2 ÿ£ŸÇŸÑ ŸÖŸÜ 90%. ÿ™ŸÇŸäŸäŸÖ ÿ™ŸÜŸÅÿ≥Ÿä ÿπÿßÿ¨ŸÑ ŸÖÿ∑ŸÑŸàÿ®.'
                });
            }
            
            // ŸÅÿ≠ÿµ ÿßŸÑŸÇŸÑÿ®
            if (heart < 100 || heart > 180) {
                warnings.push({
                    icon: '‚ù§Ô∏è',
                    title: 'ÿ•ŸÜÿ∞ÿßÿ±: ÿπÿØŸÖ ÿßŸÜÿ™ÿ∏ÿßŸÖ ÿ¥ÿØŸäÿØ ŸÅŸä ÿ∂ÿ±ÿ®ÿßÿ™ ÿßŸÑŸÇŸÑÿ®',
                    description: 'ŸÖÿπÿØŸÑ ÿ∂ÿ±ÿ®ÿßÿ™ ÿßŸÑŸÇŸÑÿ® ÿÆÿßÿ±ÿ¨ ÿßŸÑŸÜÿ∑ÿßŸÇ ÿßŸÑÿ¢ŸÖŸÜ. ÿßÿ≥ÿ™ÿ¥ÿßÿ±ÿ© ÿ∑ÿ®Ÿäÿ® ÿßŸÑŸÇŸÑÿ® ŸÖÿ∑ŸÑŸàÿ®ÿ©.'
                });
            }
            
            displayEarlyWarnings(warnings);
        }

        // ÿπÿ±ÿ∂ ÿßŸÑÿ•ŸÜÿ∞ÿßÿ±ÿßÿ™ ÿßŸÑŸÖÿ®ŸÉÿ±ÿ©
        function displayEarlyWarnings(warnings) {
            const container = document.getElementById('earlyWarningSystem');
            
            if (warnings.length === 0) {
                container.innerHTML = `
                    <div style="text-align: center; padding: 20px; color: var(--success);">
                        <div style="font-size: 3em; margin-bottom: 10px;">‚úÖ</div>
                        <div style="font-weight: bold; font-size: 1.1em;">ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ•ŸÜÿ∞ÿßÿ±ÿßÿ™</div>
                        <div style="font-size: 0.9em; opacity: 0.8; margin-top: 5px;">ÿ¨ŸÖŸäÿπ ÿßŸÑŸÖÿπÿßŸäŸäÿ± ÿ∂ŸÖŸÜ ÿßŸÑŸÜÿ∑ÿßŸÇ ÿßŸÑÿ¢ŸÖŸÜ</div>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = warnings.map(warning => `
                <div class="warning-item">
                    <div class="warning-icon">${warning.icon}</div>
                    <div class="warning-content">
                        <div class="warning-title">${warning.title}</div>
                        <div>${warning.description}</div>
                    </div>
                </div>
            `).join('');
        }

        // ÿ™ÿ≠ŸÑŸäŸÑ ÿßŸÑÿ≠ÿßŸÑÿßÿ™ ÿßŸÑÿ≠ÿ±ÿ¨ÿ©
        function runCriticalAnalysis() {
            addAlert('ÿ®ÿØÿ° ÿßŸÑÿ™ÿ≠ŸÑŸäŸÑ ÿßŸÑÿπŸÖŸäŸÇ ŸÑŸÑÿ≠ÿßŸÑÿßÿ™ ÿßŸÑÿ≠ÿ±ÿ¨ÿ©...', 'info');
            
            setTimeout(() => {
                // ŸÖÿ≠ÿßŸÉÿßÿ© ÿßŸÑÿ™ÿ≠ŸÑŸäŸÑ ÿ®ŸÜÿßÿ°Ÿã ÿπŸÑŸâ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÅÿπŸÑŸäÿ©
                const temp = parseFloat(document.getElementById('bodyTemp')?.textContent || 36.5);
                const heart = parseInt(document.getElementById('heartRate')?.textContent || 140);
                const oxygen = parseInt(document.getElementById('oxygenLevel')?.textContent || 96);
                
                // Sepsis Risk
                let sepsisRisk = 5;
                if (temp > 38 || temp < 36) sepsisRisk += 15;
                if (heart > 160) sepsisRisk += 10;
                sepsisRisk = Math.min(95, sepsisRisk);
                
                // NEC Risk
                let necRisk = 8;
                // ŸÅŸä ÿßŸÑŸàÿßŸÇÿπ Ÿäÿπÿ™ŸÖÿØ ÿπŸÑŸâ ÿ£ÿπÿ±ÿßÿ∂ ÿßŸÑÿ¨Ÿáÿßÿ≤ ÿßŸÑŸáÿ∂ŸÖŸä
                
                // RDS Risk
                let rdsRisk = 12;
                if (oxygen < 92) rdsRisk += 20;
                rdsRisk = Math.min(95, rdsRisk);
                
                // IVH Risk
                let ivhRisk = 6;
                // ŸÅŸä ÿßŸÑŸàÿßŸÇÿπ Ÿäÿπÿ™ŸÖÿØ ÿπŸÑŸâ ÿπŸÖÿ± ÿßŸÑÿ≠ŸÖŸÑ Ÿàÿßÿ≥ÿ™ŸÇÿ±ÿßÿ± ÿßŸÑÿØŸàÿ±ÿ© ÿßŸÑÿØŸÖŸàŸäÿ©
                
                // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸÇŸäŸÖ
                updateCriticalRisk('sepsis', sepsisRisk);
                updateCriticalRisk('nec', necRisk);
                updateCriticalRisk('rds', rdsRisk);
                updateCriticalRisk('ivh', ivhRisk);
                
                addAlert('ÿßŸÉÿ™ŸÖŸÑ ÿßŸÑÿ™ÿ≠ŸÑŸäŸÑ ÿßŸÑÿπŸÖŸäŸÇ ŸÑŸÑÿ≠ÿßŸÑÿßÿ™ ÿßŸÑÿ≠ÿ±ÿ¨ÿ©', 'success');
            }, 3000);
        }

        // ÿ™ÿ≠ÿØŸäÿ´ ŸÖŸÇÿßŸäŸäÿ≥ ÿßŸÑŸÖÿÆÿßÿ∑ÿ± ÿßŸÑÿ≠ÿ±ÿ¨ÿ©
        function updateCriticalRisk(type, value) {
            aiModel.criticalRisks[type] = value;
            
            const riskBar = document.getElementById(`${type}Risk`);
            const riskPercent = document.getElementById(`${type}Percent`);
            
            if (riskBar && riskPercent) {
                riskBar.style.width = value + '%';
                riskPercent.textContent = value + '%';
                
                // ÿ™ÿ∫ŸäŸäÿ± ÿßŸÑŸÑŸàŸÜ ÿ≠ÿ≥ÿ® ÿßŸÑŸÖÿ≥ÿ™ŸàŸâ
                if (value < 20) {
                    riskPercent.style.color = 'var(--success)';
                } else if (value < 50) {
                    riskPercent.style.color = 'var(--warning)';
                } else {
                    riskPercent.style.color = 'var(--danger)';
                }
            }
        }

        // ÿ≠ŸÅÿ∏ ÿ™ÿ≠ŸÑŸäŸÑ AI
        function saveAIAnalysis(type, data) {
            const analysis = {
                id: Date.now(),
                type: type,
                timestamp: new Date(),
                data: data,
                healthScore: aiModel.healthScore,
                riskLevel: aiModel.riskLevel
            };
            
            if (!localDB.aiAnalyses) localDB.aiAnalyses = [];
            localDB.aiAnalyses.unshift(analysis);
            
            // ÿßŸÑÿ≠ÿØ ÿßŸÑÿ£ŸÇÿµŸâ 50 ÿ™ÿ≠ŸÑŸäŸÑ
            if (localDB.aiAnalyses.length > 50) {
                localDB.aiAnalyses = localDB.aiAnalyses.slice(0, 50);
            }
            
            saveLocalData();
            displayAIHistory();
        }

        // ÿπÿ±ÿ∂ ÿ≥ÿ¨ŸÑ ÿßŸÑÿ™ÿ≠ŸÑŸäŸÑÿßÿ™
        function displayAIHistory() {
            const container = document.getElementById('aiHistoryList');
            if (!container) return;
            
            if (!localDB.aiAnalyses || localDB.aiAnalyses.length === 0) {
                container.innerHTML = '<p style="text-align: center; opacity: 0.6; padding: 20px;">ŸÑÿß ŸäŸàÿ¨ÿØ ÿ≥ÿ¨ŸÑ ÿ™ÿ≠ŸÑŸäŸÑÿßÿ™</p>';
                return;
            }
            
            container.innerHTML = localDB.aiAnalyses.slice(0, 10).map(analysis => `
                <div class="ai-history-item">
                    <div class="ai-history-header">
                        <span class="ai-history-type">ü§ñ ${analysis.type}</span>
                        <span class="ai-history-time">${new Date(analysis.timestamp).toLocaleString('ar')}</span>
                    </div>
                    <div class="ai-history-result">
                        ÿØÿ±ÿ¨ÿ© ÿßŸÑÿµÿ≠ÿ©: <strong>${analysis.healthScore}</strong> | 
                        ŸÖÿ≥ÿ™ŸàŸâ ÿßŸÑÿÆÿ∑Ÿàÿ±ÿ©: <strong>${analysis.riskLevel}</strong>
                        ${analysis.data.predictions ? ` | ÿ™ŸÜÿ®ÿ§ÿßÿ™: ${analysis.data.predictions}` : ''}
                        ${analysis.data.recommendations ? ` | ÿ™ŸàÿµŸäÿßÿ™: ${analysis.data.recommendations}` : ''}
                    </div>
                </div>
            `).join('');
        }

        // ÿ™ÿµÿØŸäÿ± ÿ™ŸÇÿ±Ÿäÿ± AI ÿ¥ÿßŸÖŸÑ
        function exportAIReport() {
            const report = {
                timestamp: new Date().toISOString(),
                patient: {
                    name: 'ÿ∑ŸÅŸÑ ÿ±ÿ∂Ÿäÿπ - 001',
                    gestationalAge: '32 ÿ£ÿ≥ÿ®Ÿàÿπ',
                    daysInNICU: 5
                },
                currentStatus: {
                    healthScore: aiModel.healthScore,
                    riskLevel: aiModel.riskLevel,
                    vitalSigns: {
                        temperature: document.getElementById('bodyTemp')?.textContent,
                        heartRate: document.getElementById('heartRate')?.textContent,
                        oxygen: document.getElementById('oxygenLevel')?.textContent,
                        respiration: document.getElementById('respRate')?.textContent
                    }
                },
                predictions: aiModel.predictions,
                recommendations: aiModel.recommendations,
                patterns: aiModel.patterns,
                criticalRisks: aiModel.criticalRisks,
                history: localDB.aiAnalyses.slice(0, 20)
            };
            
            const reportStr = JSON.stringify(report, null, 2);
            const blob = new Blob([reportStr], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `AI_Medical_Report_${Date.now()}.json`;
            link.click();
            
            addAlert('ÿ™ŸÖ ÿ™ÿµÿØŸäÿ± ÿßŸÑÿ™ŸÇÿ±Ÿäÿ± ÿßŸÑÿ∑ÿ®Ÿä ÿßŸÑÿ¥ÿßŸÖŸÑ ÿ®ŸÜÿ¨ÿßÿ≠', 'success');
        }

        // ============================================
        // üí° ÿßŸÑÿ™ÿ≠ŸÉŸÖ ŸÅŸä ÿßŸÑÿ•ÿ∂ÿßÿ°ÿßÿ™ ÿßŸÑÿ´ŸÑÿßÿ´ÿ©
        // ============================================

        // 1. ÿßŸÑÿ•ÿ∂ÿßÿ°ÿ© ÿßŸÑÿπÿßÿØŸäÿ©
        function toggleNormalLight(enabled) {
            const lightElement = document.getElementById('lightNormalControl');
            const indicator = document.getElementById('normalLightIndicator');
            
            console.log('toggleNormalLight called:', enabled);
            console.log('lightElement:', lightElement);
            
            if (enabled) {
                lightElement.classList.add('active');
                indicator.classList.add('active-system');
                // ÿ™ÿ∑ÿ®ŸäŸÇ ÿßŸÑÿ¥ÿØÿ© ÿßŸÑÿ≠ÿßŸÑŸäÿ©
                const intensity = document.getElementById('normalLightIntensity').value;
                lightElement.style.opacity = intensity / 100;
                addAlert('ÿ™ŸÖ ÿ™ŸÅÿπŸäŸÑ ÿßŸÑÿ•ÿ∂ÿßÿ°ÿ© ÿßŸÑÿπÿßÿØŸäÿ©', 'info');
                console.log('Light activated, opacity:', intensity / 100);
            } else {
                lightElement.classList.remove('active');
                indicator.classList.remove('active-system');
                addAlert('ÿ™ŸÖ ÿ•ŸäŸÇÿßŸÅ ÿßŸÑÿ•ÿ∂ÿßÿ°ÿ© ÿßŸÑÿπÿßÿØŸäÿ©', 'info');
                console.log('Light deactivated');
            }
        }

        function updateNormalLightIntensity(value) {
            document.getElementById('normalLightValue').textContent = value + '%';
            const lightElement = document.getElementById('lightNormalControl');
            const isActive = document.getElementById('normalLightSwitch').checked;
            
            if (isActive) {
                // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ¥ÿØÿ© ŸÖÿ®ÿßÿ¥ÿ±ÿ©
                lightElement.style.opacity = value / 100;
                console.log('Intensity updated:', value);
            }
        }

        // 2. ÿßŸÑÿπŸÑÿßÿ¨ ÿßŸÑÿ∂Ÿàÿ¶Ÿä ŸÑŸÑŸäÿ±ŸÇÿßŸÜ
        function toggleJaundiceLight(enabled) {
            const lightElement = document.getElementById('lightJaundiceControl');
            const indicator = document.getElementById('jaundiceLightIndicator');
            
            console.log('toggleJaundiceLight called:', enabled);
            
            if (enabled) {
                if (!confirm('‚ö†Ô∏è ŸáŸÑ ÿ™ÿ±ŸäÿØ ÿ™ŸÅÿπŸäŸÑ ÿßŸÑÿπŸÑÿßÿ¨ ÿßŸÑÿ∂Ÿàÿ¶Ÿä ŸÑŸÑŸäÿ±ŸÇÿßŸÜÿü\n\nÿßŸÑÿ∑ŸàŸÑ ÿßŸÑŸÖŸàÿ¨Ÿä: 450-470nm (ÿ£ÿ≤ÿ±ŸÇ-ÿ£ÿÆÿ∂ÿ±)\nÿßŸÑÿßÿ≥ÿ™ÿÆÿØÿßŸÖ: ÿπŸÑÿßÿ¨ ÿßŸÑŸäÿ±ŸÇÿßŸÜ ÿßŸÑŸàŸÑŸäÿØŸä\n\nŸäÿ¨ÿ® ÿßÿ≥ÿ™ÿ¥ÿßÿ±ÿ© ÿßŸÑÿ∑ÿ®Ÿäÿ® ÿ£ŸàŸÑÿßŸã.')) {
                    document.getElementById('jaundiceSwitch').checked = false;
                    return;
                }
                
                lightElement.classList.add('active');
                indicator.classList.add('active-system');
                // ÿ™ÿ∑ÿ®ŸäŸÇ ÿßŸÑÿ¥ÿØÿ© ÿßŸÑÿ≠ÿßŸÑŸäÿ©
                const intensity = document.getElementById('jaundiceLightIntensity').value;
                lightElement.style.opacity = intensity / 100;
                startJaundiceTimer();
                addAlert('ÿ™ŸÖ ÿ™ŸÅÿπŸäŸÑ ÿßŸÑÿπŸÑÿßÿ¨ ÿßŸÑÿ∂Ÿàÿ¶Ÿä ŸÑŸÑŸäÿ±ŸÇÿßŸÜ - ÿßŸÑÿ∑ŸàŸÑ ÿßŸÑŸÖŸàÿ¨Ÿä 450-470nm', 'warning');
                console.log('Jaundice light activated');
                
                // ÿ•ŸäŸÇÿßŸÅ UV ÿ•ÿ∞ÿß ŸÉÿßŸÜ ŸÖŸÅÿπŸÑÿßŸã
                if (document.getElementById('uvSwitch').checked) {
                    document.getElementById('uvSwitch').checked = false;
                    toggleUVSterilization(false);
                }
            } else {
                lightElement.classList.remove('active');
                indicator.classList.remove('active-system');
                stopJaundiceTimer();
                addAlert('ÿ™ŸÖ ÿ•ŸäŸÇÿßŸÅ ÿßŸÑÿπŸÑÿßÿ¨ ÿßŸÑÿ∂Ÿàÿ¶Ÿä', 'info');
                console.log('Jaundice light deactivated');
            }
        }

        function updateJaundiceLightIntensity(value) {
            document.getElementById('jaundiceLightValue').textContent = value + '%';
            const lightElement = document.getElementById('lightJaundiceControl');
            const isActive = document.getElementById('jaundiceSwitch').checked;
            
            if (isActive) {
                lightElement.style.opacity = value / 100;
                console.log('Jaundice intensity updated:', value);
            }
        }

        function startJaundiceTimer() {
            jaundiceTimeElapsed = 0;
            
            jaundiceTimerInterval = setInterval(() => {
                jaundiceTimeElapsed++;
                
                const hours = Math.floor(jaundiceTimeElapsed / 3600);
                const minutes = Math.floor((jaundiceTimeElapsed % 3600) / 60);
                const seconds = jaundiceTimeElapsed % 60;
                
                document.getElementById('jaundiceTimerDisplay').textContent = 
                    `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                
                // ÿ™ŸÜÿ®ŸäŸá ŸÉŸÑ ÿ≥ÿßÿπÿ©
                if (jaundiceTimeElapsed % 3600 === 0 && jaundiceTimeElapsed > 0) {
                    addAlert(`ÿßŸÑÿπŸÑÿßÿ¨ ÿßŸÑÿ∂Ÿàÿ¶Ÿä ÿ¨ÿßÿ±Ÿä ŸÖŸÜÿ∞ ${hours} ÿ≥ÿßÿπÿ©`, 'info');
                }
            }, 1000);
        }

        function stopJaundiceTimer() {
            if (jaundiceTimerInterval) {
                clearInterval(jaundiceTimerInterval);
                jaundiceTimerInterval = null;
            }
            document.getElementById('jaundiceTimerDisplay').textContent = '0:00:00';
        }

        // 3. ÿ™ÿπŸÇŸäŸÖ UV-C
        function toggleUVSterilization(enabled) {
            const lightElement = document.getElementById('lightUVControl');
            const indicator = document.getElementById('uvLightIndicator');
            
            console.log('toggleUVSterilization called:', enabled);
            
            if (enabled) {
                if (!confirm('‚ö†Ô∏è ÿ™ÿ≠ÿ∞Ÿäÿ± ÿ£ŸÖÿßŸÜ ÿ≠ÿ±ÿ¨!\n\nŸáŸÑ ÿ£ŸÜÿ™ ŸÖÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿ®ÿØÿ° ÿßŸÑÿ™ÿπŸÇŸäŸÖ UV-Cÿü\n\n‚úã Ÿäÿ¨ÿ® ÿ•ÿÆŸÑÿßÿ° ÿßŸÑÿ≠ÿßÿ∂ŸÜÿ© ÿ™ŸÖÿßŸÖÿßŸã!\nüö´ ÿßŸÑÿ£ÿ¥ÿπÿ© UV-C (254nm) ÿÆÿ∑ÿ±ÿ© ÿ¨ÿØÿßŸã ÿπŸÑŸâ ÿßŸÑÿ®ÿ¥ÿ±ÿ© ŸàÿßŸÑÿπŸäŸÜŸäŸÜ!\n‚è±Ô∏è ŸÑÿß ÿ™ŸÇÿ™ÿ±ÿ® ŸÖŸÜ ÿßŸÑÿ≠ÿßÿ∂ŸÜÿ© ÿ£ÿ´ŸÜÿßÿ° ÿßŸÑÿ™ÿπŸÇŸäŸÖ!\n\nÿßŸÑŸÅÿπÿßŸÑŸäÿ©: 99.9% ÿ∂ÿØ ÿßŸÑÿ®ŸÉÿ™Ÿäÿ±Ÿäÿß ŸàÿßŸÑŸÅŸäÿ±Ÿàÿ≥ÿßÿ™\n\nÿßÿ∂ÿ∫ÿ∑ OK ŸÑŸÑŸÖÿ™ÿßÿ®ÿπÿ© ÿ£Ÿà Cancel ŸÑŸÑÿ•ŸÑÿ∫ÿßÿ°.')) {
                    document.getElementById('uvSwitch').checked = false;
                    return;
                }
                
                lightElement.classList.add('active');
                indicator.classList.add('active-system');
                lightElement.style.opacity = 1; // UV ÿØÿßÿ¶ŸÖÿßŸã ÿ®ÿ¥ÿØÿ© ŸÉÿßŸÖŸÑÿ©
                startUVTimer();
                addAlert('ÿ®ÿØÿ° ÿßŸÑÿ™ÿπŸÇŸäŸÖ ÿ®ÿßŸÑÿ£ÿ¥ÿπÿ© ŸÅŸàŸÇ ÿßŸÑÿ®ŸÜŸÅÿ≥ÿ¨Ÿäÿ© UV-C - 254nm', 'danger');
                console.log('UV light activated');
                
                // ÿ•ŸäŸÇÿßŸÅ ÿßŸÑÿ•ÿ∂ÿßÿ°ÿßÿ™ ÿßŸÑÿ£ÿÆÿ±Ÿâ
                if (document.getElementById('normalLightSwitch').checked) {
                    document.getElementById('normalLightSwitch').checked = false;
                    toggleNormalLight(false);
                }
                if (document.getElementById('jaundiceSwitch').checked) {
                    document.getElementById('jaundiceSwitch').checked = false;
                    toggleJaundiceLight(false);
                }
            } else {
                stopUVSterilization();
            }
        }

        function updateUVDuration(value) {
            document.getElementById('uvDurationValue').textContent = value + ' ÿØ';
            uvCountdownSeconds = value * 60;
        }

        function startUVTimer() {
            const duration = parseInt(document.getElementById('uvDuration').value);
            uvCountdownSeconds = duration * 60;
            
            document.getElementById('uvTimer').style.display = 'block';
            
            uvTimerInterval = setInterval(() => {
                uvCountdownSeconds--;
                
                const minutes = Math.floor(uvCountdownSeconds / 60);
                const seconds = uvCountdownSeconds % 60;
                document.getElementById('uvCountdown').textContent = 
                    `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                
                // ÿ™ÿ≠ÿØŸäÿ´ ÿ¥ÿ±Ÿäÿ∑ ÿßŸÑÿ™ŸÇÿØŸÖ
                const totalSeconds = duration * 60;
                const progress = ((totalSeconds - uvCountdownSeconds) / totalSeconds) * 100;
                document.getElementById('uvProgressBar').style.width = progress + '%';
                
                if (uvCountdownSeconds <= 0) {
                    stopUVSterilization();
                    addAlert('ÿßŸÉÿ™ŸÖŸÑ ÿßŸÑÿ™ÿπŸÇŸäŸÖ ÿ®ŸÜÿ¨ÿßÿ≠ - ÿ™ŸÖ ŸÇÿ™ŸÑ 99.9% ŸÖŸÜ ÿßŸÑÿ®ŸÉÿ™Ÿäÿ±Ÿäÿß ŸàÿßŸÑŸÅŸäÿ±Ÿàÿ≥ÿßÿ™', 'success');
                    alert('‚úÖ ÿßŸÉÿ™ŸÖŸÑ ÿßŸÑÿ™ÿπŸÇŸäŸÖ!\n\nŸäŸÖŸÉŸÜŸÉ ÿßŸÑÿ¢ŸÜ ŸÅÿ™ÿ≠ ÿßŸÑÿ≠ÿßÿ∂ŸÜÿ© ÿ®ÿ£ŸÖÿßŸÜ.\n\nÿ™ŸÖ ÿ™ÿπŸÇŸäŸÖ ÿßŸÑÿ≠ÿßÿ∂ŸÜÿ© ÿ®ÿßŸÑŸÉÿßŸÖŸÑ.');
                }
            }, 1000);
        }

        function stopUVSterilization() {
            if (uvTimerInterval) {
                clearInterval(uvTimerInterval);
                uvTimerInterval = null;
            }
            
            document.getElementById('uvTimer').style.display = 'none';
            document.getElementById('uvSwitch').checked = false;
            document.getElementById('lightUVControl').classList.remove('active');
            document.getElementById('uvLightIndicator').classList.remove('active-system');
            document.getElementById('uvProgressBar').style.width = '0%';
            
            addAlert('ÿ™ŸÖ ÿ•ŸäŸÇÿßŸÅ ÿßŸÑÿ™ÿπŸÇŸäŸÖ', 'info');
            console.log('UV light deactivated');
        }

        // ============================================
        // üé¨ ÿßŸÑÿ™ÿ≠ŸÉŸÖ ŸÅŸä ÿßŸÑÿπÿ±ÿ∂ ÿ´ŸÑÿßÿ´Ÿä ÿßŸÑÿ£ÿ®ÿπÿßÿØ
        // ============================================

        function toggleRotationControl() {
            const incubator = document.getElementById('incubator3dControl');
            isRotatingControl = !isRotatingControl;
            
            if (isRotatingControl) {
                incubator.classList.add('rotating');
                document.getElementById('rotationIconControl').textContent = '‚è∏Ô∏è';
                document.getElementById('rotationTextControl').textContent = 'ÿ•ŸäŸÇÿßŸÅ ÿßŸÑÿØŸàÿ±ÿßŸÜ';
            } else {
                incubator.classList.remove('rotating');
                document.getElementById('rotationIconControl').textContent = '‚ñ∂Ô∏è';
                document.getElementById('rotationTextControl').textContent = 'ÿØŸàÿ±ÿßŸÜ ÿ™ŸÑŸÇÿßÿ¶Ÿä';
            }
        }

        function resetViewControl() {
            const incubator = document.getElementById('incubator3dControl');
            incubator.classList.remove('rotating');
            incubator.style.transform = 'translate(-50%, -50%) rotateX(20deg) rotateY(0deg) scale(1)';
            isRotatingControl = false;
            currentZoom = 1;
            document.getElementById('rotationIconControl').textContent = '‚ñ∂Ô∏è';
            document.getElementById('rotationTextControl').textContent = 'ÿØŸàÿ±ÿßŸÜ ÿ™ŸÑŸÇÿßÿ¶Ÿä';
        }

        function zoomInControl() {
            const incubator = document.getElementById('incubator3dControl');
            if (currentZoom < 1.5) {
                currentZoom += 0.1;
                incubator.style.transform = `translate(-50%, -50%) rotateX(20deg) rotateY(0deg) scale(${currentZoom})`;
            }
        }

        function zoomOutControl() {
            const incubator = document.getElementById('incubator3dControl');
            if (currentZoom > 0.7) {
                currentZoom -= 0.1;
                incubator.style.transform = `translate(-50%, -50%) rotateX(20deg) rotateY(0deg) scale(${currentZoom})`;
            }
        }

        // ============================================
        // üß™ ÿØŸàÿßŸÑ ÿßÿÆÿ™ÿ®ÿßÿ± ÿßŸÑÿ•ÿ∂ÿßÿ°ÿßÿ™
        // ============================================

        function testLight(type) {
            const lights = {
                'normal': 'lightNormalControl',
                'jaundice': 'lightJaundiceControl',
                'uv': 'lightUVControl'
            };
            
            const lightId = lights[type];
            const lightElement = document.getElementById(lightId);
            
            if (!lightElement) {
                console.error('Light element not found:', lightId);
                return;
            }
            
            // ÿ•ŸäŸÇÿßŸÅ ÿ¨ŸÖŸäÿπ ÿßŸÑÿ•ÿ∂ÿßÿ°ÿßÿ™ ÿ£ŸàŸÑÿßŸã
            Object.values(lights).forEach(id => {
                document.getElementById(id).classList.remove('active');
            });
            
            // ÿ™ŸÅÿπŸäŸÑ ÿßŸÑÿ•ÿ∂ÿßÿ°ÿ© ÿßŸÑŸÖÿ≠ÿØÿØÿ©
            lightElement.classList.add('active');
            lightElement.style.opacity = 1;
            
            console.log(`Testing ${type} light for 3 seconds`);
            addAlert(`ÿßÿÆÿ™ÿ®ÿßÿ± ${type === 'normal' ? 'ÿßŸÑÿ•ÿ∂ÿßÿ°ÿ© ÿßŸÑÿπÿßÿØŸäÿ©' : type === 'jaundice' ? 'ÿßŸÑÿπŸÑÿßÿ¨ ÿßŸÑÿ∂Ÿàÿ¶Ÿä' : 'UV-C'} ŸÑŸÖÿØÿ© 3 ÿ´ŸàÿßŸÜŸç`, 'info');
            
            // ÿ•ŸäŸÇÿßŸÅ ÿ®ÿπÿØ 3 ÿ´ŸàÿßŸÜŸç
            setTimeout(() => {
                lightElement.classList.remove('active');
                console.log(`${type} light test completed`);
            }, 3000);
        }

        function testAllLights() {
            console.log('Testing all lights sequentially');
            addAlert('ÿ®ÿØÿ° ÿßÿÆÿ™ÿ®ÿßÿ± ÿ¨ŸÖŸäÿπ ÿßŸÑÿ•ÿ∂ÿßÿ°ÿßÿ™ - ŸÉŸÑ ÿ•ÿ∂ÿßÿ°ÿ© ŸÑŸÖÿØÿ© 2 ÿ´ÿßŸÜŸäÿ©', 'info');
            
            // ÿßÿÆÿ™ÿ®ÿßÿ± ÿßŸÑÿ•ÿ∂ÿßÿ°ÿ© ÿßŸÑÿπÿßÿØŸäÿ©
            setTimeout(() => {
                testLight('normal');
            }, 0);
            
            // ÿßÿÆÿ™ÿ®ÿßÿ± ÿßŸÑÿπŸÑÿßÿ¨ ÿßŸÑÿ∂Ÿàÿ¶Ÿä
            setTimeout(() => {
                testLight('jaundice');
            }, 2500);
            
            // ÿßÿÆÿ™ÿ®ÿßÿ± UV-C
            setTimeout(() => {
                testLight('uv');
            }, 5000);
            
            // ÿ±ÿ≥ÿßŸÑÿ© ŸÜŸáÿßŸäÿ© ÿßŸÑÿßÿÆÿ™ÿ®ÿßÿ±
            setTimeout(() => {
                addAlert('ÿßŸÉÿ™ŸÖŸÑ ÿßÿÆÿ™ÿ®ÿßÿ± ÿ¨ŸÖŸäÿπ ÿßŸÑÿ•ÿ∂ÿßÿ°ÿßÿ™ ÿ®ŸÜÿ¨ÿßÿ≠', 'success');
            }, 7500);
        }

        // ============================================
        // üéõÔ∏è ÿ™ÿ≠ÿØŸäÿ´ ŸÖÿ§ÿ¥ÿ±ÿßÿ™ ÿßŸÑÿ£ŸÜÿ∏ŸÖÿ©
        // ============================================

        function toggleHeatingSystem(enabled) {
            const indicator = document.getElementById('heatingIndicator');
            if (enabled) {
                indicator.classList.add('active-system');
            } else {
                indicator.classList.remove('active-system');
            }
        }

        function toggleHumiditySystem(enabled) {
            const indicator = document.getElementById('humidityIndicator');
            if (enabled) {
                indicator.classList.add('active-system');
            } else {
                indicator.classList.remove('active-system');
            }
        }

        function toggleOxygenSystem(enabled) {
            const indicator = document.getElementById('oxygenIndicator');
            if (enabled) {
                indicator.classList.add('active-system');
            } else {
                indicator.classList.remove('active-system');
            }
        }

        // ÿßŸÑÿ™ŸáŸäÿ¶ÿ© ÿπŸÜÿØ ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ
        document.addEventListener('DOMContentLoaded', () => {
            console.log('üöÄ ÿ®ÿØÿ° ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑŸÜÿ∏ÿßŸÖ...');
            loadLocalData();
            
            const savedTheme = localStorage.getItem('selectedTheme') || 'light';
            if (document.getElementById('themeSelect')) {
                document.getElementById('themeSelect').value = savedTheme;
                applyTheme();
            }
            
            if (document.getElementById('wemosIP')) {
                document.getElementById('wemosIP').value = WEMOS_IP;
            }
            
            // ÿ™ŸÅÿπŸäŸÑ ÿßŸÑÿ•ÿ∂ÿßÿ°ÿ© ÿßŸÑÿπÿßÿØŸäÿ© ÿßŸÅÿ™ÿ±ÿßÿ∂ŸäÿßŸã
            if (document.getElementById('normalLightSwitch').checked) {
                toggleNormalLight(true);
            }
            
            // ÿ™ŸÅÿπŸäŸÑ ŸÖÿ§ÿ¥ÿ±ÿßÿ™ ÿßŸÑÿ£ŸÜÿ∏ŸÖÿ© ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿäÿ©
            toggleHeatingSystem(true);
            toggleHumiditySystem(true);
            toggleOxygenSystem(true);
            
            updateTime();
            setInterval(updateTime, 1000);
            initCharts();
            
            setInterval(() => {
                updateSimulatedData();
                
                // ÿ™ÿ≠ÿØŸäÿ´ ÿ™ŸÑŸÇÿßÿ¶Ÿä ŸÑŸÑÿ∞ŸÉÿßÿ° ÿßŸÑÿßÿµÿ∑ŸÜÿßÿπŸä ŸÉŸÑ 30 ÿ´ÿßŸÜŸäÿ©
                if (Math.random() > 0.5) {
                    calculateHealthScore();
                }
            }, 3000);
            
            // ÿ™ÿ¥ÿ∫ŸäŸÑ ÿßŸÑÿ™ÿ≠ŸÑŸäŸÑ ÿßŸÑÿ£ŸàŸÑŸä ŸÑŸÑÿ∞ŸÉÿßÿ° ÿßŸÑÿßÿµÿ∑ŸÜÿßÿπŸä
            setTimeout(() => {
                runAIAnalysis();
            }, 3000);
            
            // ÿ•ÿ∂ÿßŸÅÿ© ÿ±ÿ≥ÿßŸÑÿ© ÿ™ÿ±ÿ≠Ÿäÿ®
            setTimeout(() => {
                addAlert('ŸÖÿ±ÿ≠ÿ®ÿßŸã ÿ®ŸÉ ŸÅŸä ŸÜÿ∏ÿßŸÖ ÿ≠ÿßÿ∂ŸÜÿ© ÿßŸÑÿ£ÿ∑ŸÅÿßŸÑ ÿßŸÑÿ∞ŸÉŸäÿ© Pro', 'success');
            }, 1000);
            
            console.log('‚úÖ ÿ™ŸÖ ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑŸÜÿ∏ÿßŸÖ ÿ®ŸÜÿ¨ÿßÿ≠');
        });

        // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸàŸÇÿ™
        function updateTime() {
            const now = new Date();
            if (document.getElementById('lastUpdate')) {
                document.getElementById('lastUpdate').textContent = now.toLocaleTimeString('ar');
            }
        }

        // ÿ™ÿ®ÿØŸäŸÑ ÿßŸÑÿ™ÿ®ŸàŸäÿ®ÿßÿ™
        function switchTab(tabName) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
            
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(tab => {
                if (tab.getAttribute('onclick').includes(tabName)) {
                    tab.classList.add('active');
                }
            });
            
            const content = document.getElementById(tabName);
            if (content) content.classList.add('active');
        }

        // ÿßŸÑÿ™ÿ≠ŸÉŸÖ ŸÅŸä ÿßŸÑÿ•ÿπÿØÿßÿØÿßÿ™
        function updateHeatingTemp(value) {
            document.getElementById('heatingTempValue').textContent = value + '¬∞C';
            toggleHeatingSystem(document.getElementById('heatingSwitch').checked);
        }

        function updateHumidityTarget(value) {
            document.getElementById('humidityTargetValue').textContent = value + '%';
            toggleHumiditySystem(document.getElementById('humidifierSwitch').checked);
        }

        function updateOxygenLevel(value) {
            document.getElementById('oxygenLevelValue').textContent = value + '%';
        }

        function updateTempMin(value) {
            document.getElementById('tempMinValue').textContent = value + '¬∞C';
        }

        function updateTempMax(value) {
            document.getElementById('tempMaxValue').textContent = value + '¬∞C';
        }

        // ÿßŸÑÿ´ŸäŸÖÿßÿ™
        const themes = {
            light: { '--primary': '#667eea', '--secondary': '#764ba2', '--bg': 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)' },
            dark: { '--primary': '#667eea', '--secondary': '#764ba2', '--bg': '#111827' },
            blue: { '--primary': '#3b82f6', '--secondary': '#1e40af', '--bg': 'linear-gradient(135deg, #3b82f6 0%, #1e40af 100%)' },
            green: { '--primary': '#10b981', '--secondary': '#047857', '--bg': 'linear-gradient(135deg, #10b981 0%, #047857 100%)' },
            purple: { '--primary': '#a855f7', '--secondary': '#7c3aed', '--bg': 'linear-gradient(135deg, #a855f7 0%, #7c3aed 100%)' },
            orange: { '--primary': '#f59e0b', '--secondary': '#d97706', '--bg': 'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)' }
        };

        function applyTheme() {
            const theme = document.getElementById('themeSelect').value;
            const root = document.documentElement;
            document.body.setAttribute('data-theme', theme === 'dark' ? 'dark' : 'light');
            const colors = themes[theme];
            for (const [key, value] of Object.entries(colors)) {
                root.style.setProperty(key, value);
            }
            localStorage.setItem('selectedTheme', theme);
        }

        function toggleTheme() {
            const body = document.body;
            const theme = body.getAttribute('data-theme');
            body.setAttribute('data-theme', theme === 'light' ? 'dark' : 'light');
        }

        function toggleAutoTheme() {
            const enabled = document.getElementById('autoTheme')?.checked;
            if (enabled) {
                const hour = new Date().getHours();
                const themeSelect = document.getElementById('themeSelect');
                if (themeSelect) {
                    themeSelect.value = (hour >= 18 || hour < 6) ? 'dark' : 'light';
                    applyTheme();
                }
            }
        }

        // ÿßŸÑÿ±ÿ≥ŸàŸÖ ÿßŸÑÿ®ŸäÿßŸÜŸäÿ©
        function initCharts() {
            const chartOptions = {
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { display: false } },
                scales: { y: { beginAtZero: false } }
            };
            
            const tempCtx = document.getElementById('tempChart');
            if (tempCtx) {
                charts.temp = new Chart(tempCtx, {
                    type: 'line',
                    data: {
                        labels: generateTimeLabels(),
                        datasets: [{
                            label: 'ÿØÿ±ÿ¨ÿ© ÿßŸÑÿ≠ÿ±ÿßÿ±ÿ©',
                            data: generateRandomData(36, 37, 24),
                            borderColor: '#ef4444',
                            backgroundColor: 'rgba(239, 68, 68, 0.1)',
                            tension: 0.4,
                            fill: true
                        }]
                    },
                    options: chartOptions
                });
            }
            
            const heartCtx = document.getElementById('heartChart');
            if (heartCtx) {
                charts.heart = new Chart(heartCtx, {
                    type: 'line',
                    data: {
                        labels: generateTimeLabels(),
                        datasets: [{
                            label: 'ŸÜÿ®ÿ∂ÿßÿ™ ÿßŸÑŸÇŸÑÿ®',
                            data: generateRandomData(130, 150, 24),
                            borderColor: '#ef4444',
                            backgroundColor: 'rgba(239, 68, 68, 0.1)',
                            tension: 0.4,
                            fill: true
                        }]
                    },
                    options: chartOptions
                });
            }
            
            const oxygenCtx = document.getElementById('oxygenChart');
            if (oxygenCtx) {
                charts.oxygen = new Chart(oxygenCtx, {
                    type: 'line',
                    data: {
                        labels: generateTimeLabels(),
                        datasets: [{
                            label: 'ÿßŸÑÿ£ŸÉÿ≥ÿ¨ŸäŸÜ',
                            data: generateRandomData(94, 98, 24),
                            borderColor: '#10b981',
                            backgroundColor: 'rgba(16, 185, 129, 0.1)',
                            tension: 0.4,
                            fill: true
                        }]
                    },
                    options: chartOptions
                });
            }
            
            const humidityCtx = document.getElementById('humidityChart');
            if (humidityCtx) {
                charts.humidity = new Chart(humidityCtx, {
                    type: 'line',
                    data: {
                        labels: generateTimeLabels(),
                        datasets: [{
                            label: 'ÿßŸÑÿ±ÿ∑Ÿàÿ®ÿ©',
                            data: generateRandomData(50, 70, 24),
                            borderColor: '#3b82f6',
                            backgroundColor: 'rgba(59, 130, 246, 0.1)',
                            tension: 0.4,
                            fill: true
                        }]
                    },
                    options: chartOptions
                });
            }
        }

        function generateTimeLabels() {
            const labels = [];
            for (let i = 23; i >= 0; i--) {
                labels.push(`${i}h`);
            }
            return labels.reverse();
        }

        function generateRandomData(min, max, count) {
            return Array.from({ length: count }, () => 
                Math.random() * (max - min) + min
            );
        }

        // ŸÖÿ≠ÿßŸÉÿßÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™
        function updateSimulatedData() {
            updateSensorValue('bodyTemp', (36 + Math.random()).toFixed(1));
            updateSensorValue('heartRate', Math.floor(130 + Math.random() * 20));
            updateSensorValue('oxygenLevel', Math.floor(94 + Math.random() * 4));
            updateSensorValue('respRate', Math.floor(40 + Math.random() * 10));
            updateSensorValue('humidity', Math.floor(50 + Math.random() * 20));
            updateSensorValue('weight', (2.4 + Math.random() * 0.1).toFixed(1));
            updateSensorValue('noise', Math.floor(35 + Math.random() * 15));
            updateSensorValue('envTemp', (34.5 + Math.random()).toFixed(1));
        }

        function updateSensorValue(id, value) {
            const element = document.getElementById(id);
            if (element) element.textContent = value;
        }

        // ÿßŸÑŸÖŸÑÿßÿ≠ÿ∏ÿßÿ™
        function addNote() {
            const nurseName = document.getElementById('nurseName').value;
            const category = document.getElementById('noteCategory').value;
            const content = document.getElementById('noteContent').value;
            
            if (!nurseName || !content) {
                alert('‚ö†Ô∏è ÿßŸÑÿ±ÿ¨ÿßÿ° ÿ•ÿØÿÆÿßŸÑ ÿßŸÑÿßÿ≥ŸÖ ŸàÿßŸÑŸÖŸÑÿßÿ≠ÿ∏ÿ©');
                return;
            }
            
            const note = {
                id: Date.now(),
                nurse: nurseName,
                category: category,
                content: content,
                timestamp: new Date()
            };
            
            localDB.notes.unshift(note);
            saveLocalData();
            displayNotes();
            document.getElementById('noteContent').value = '';
        }

        function displayNotes() {
            const container = document.getElementById('notesContainer');
            if (!container) return;
            
            if (localDB.notes.length === 0) {
                container.innerHTML = '<p style="text-align: center; opacity: 0.6;">ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸÖŸÑÿßÿ≠ÿ∏ÿßÿ™</p>';
                return;
            }
            
            container.innerHTML = localDB.notes.map(note => `
                <div class="note-item">
                    <div class="note-header">
                        <span class="note-nurse">${note.nurse}</span>
                        <span class="note-time">${new Date(note.timestamp).toLocaleString('ar')}</span>
                    </div>
                    <div class="note-content">${note.content}</div>
                    <span class="note-category category-${note.category}">${getCategoryName(note.category)}</span>
                    <div class="note-actions">
                        <button class="btn-small btn-delete" onclick="deleteNote(${note.id})">üóëÔ∏è ÿ≠ÿ∞ŸÅ</button>
                    </div>
                </div>
            `).join('');
        }

        function deleteNote(id) {
            if (confirm('ŸáŸÑ ÿ™ÿ±ŸäÿØ ÿ≠ÿ∞ŸÅ Ÿáÿ∞Ÿá ÿßŸÑŸÖŸÑÿßÿ≠ÿ∏ÿ©ÿü')) {
                localDB.notes = localDB.notes.filter(n => n.id !== id);
                saveLocalData();
                displayNotes();
            }
        }

        function getCategoryName(category) {
            const names = {
                'vital': 'ŸÖÿ§ÿ¥ÿ±ÿßÿ™ ÿ≠ŸäŸàŸäÿ©',
                'feeding': 'ÿ™ÿ∫ÿ∞Ÿäÿ©',
                'medication': 'ÿØŸàÿßÿ°',
                'observation': 'ŸÖŸÑÿßÿ≠ÿ∏ÿ©',
                'general': 'ÿπÿßŸÖ'
            };
            return names[category] || category;
        }

        function exportNotes() {
            const dataStr = JSON.stringify(localDB.notes, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `notes_${Date.now()}.json`;
            link.click();
        }

        // ŸÇÿßÿπÿØÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™
        function loadLocalData() {
            const saved = localStorage.getItem('incubatorDB');
            if (saved) {
                localDB = JSON.parse(saved);
                displayNotes();
                updateDBStats();
            }
        }

        function saveLocalData() {
            localStorage.setItem('incubatorDB', JSON.stringify(localDB));
            updateDBStats();
        }

        function updateDBStats() {
            if (document.getElementById('dbRecords')) {
                document.getElementById('dbRecords').textContent = localDB.records.length;
            }
            if (document.getElementById('dbNotes')) {
                document.getElementById('dbNotes').textContent = localDB.notes.length;
            }
            if (document.getElementById('dbSize')) {
                const size = new Blob([JSON.stringify(localDB)]).size / 1024;
                document.getElementById('dbSize').textContent = size.toFixed(2);
            }
        }

        function backupDatabase() {
            const dataStr = JSON.stringify(localDB, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `incubator_backup_${Date.now()}.json`;
            link.click();
        }

        function clearDatabase() {
            if (confirm('‚ö†Ô∏è ŸáŸÑ ÿ™ÿ±ŸäÿØ ŸÖÿ≥ÿ≠ ÿ¨ŸÖŸäÿπ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ÿü')) {
                localDB = { notes: [], records: [], settings: {} };
                saveLocalData();
                displayNotes();
            }
        }

        // Arduino
        async function connectArduino() {
            const ip = document.getElementById('arduinoIP').value;
            const port = document.getElementById('arduinoPort').value;
            
            try {
                const response = await fetch(`http://${ip}:${port}/api/status`, {
                    signal: AbortSignal.timeout(5000)
                });
                
                if (response.ok) {
                    document.getElementById('arduinoStatus').textContent = '‚óè ŸÖÿ™ÿµŸÑ';
                    document.getElementById('arduinoStatus').className = 'status-indicator status-connected';
                }
            } catch (error) {
                document.getElementById('arduinoStatus').textContent = '‚óè ÿ∫Ÿäÿ± ŸÖÿ™ÿµŸÑ';
                document.getElementById('arduinoStatus').className = 'status-indicator status-disconnected';
            }
        }

        function disconnectArduino() {
            document.getElementById('arduinoStatus').textContent = '‚óè ÿ∫Ÿäÿ± ŸÖÿ™ÿµŸÑ';
            document.getElementById('arduinoStatus').className = 'status-indicator status-disconnected';
        }

        // ÿ£ÿ≤ÿ±ÿßÿ± ÿßŸÑÿ™ÿ≠ŸÉŸÖ
        function quickPreset(preset) {
            switch(preset) {
                case 'normal':
                    document.getElementById('heatingTemp').value = 36.5;
                    updateHeatingTemp(36.5);
                    document.getElementById('normalLightSwitch').checked = true;
                    toggleNormalLight(true);
                    addAlert('ÿ™ŸÖ ÿ™ÿ∑ÿ®ŸäŸÇ ÿßŸÑŸàÿ∂ÿπ ÿßŸÑÿπÿßÿØŸä', 'success');
                    break;
                case 'intensive':
                    document.getElementById('heatingTemp').value = 37;
                    updateHeatingTemp(37);
                    document.getElementById('oxygenLevelControl').value = 40;
                    updateOxygenLevel(40);
                    addAlert('ÿ™ŸÖ ÿ™ÿ∑ÿ®ŸäŸÇ ÿßŸÑŸàÿ∂ÿπ ÿßŸÑŸÖŸÉÿ´ŸÅ', 'warning');
                    break;
                case 'phototherapy':
                    document.getElementById('jaundiceSwitch').checked = true;
                    toggleJaundiceLight(true);
                    break;
            }
        }

        function emergencyStop() {
            if (confirm('‚ö†Ô∏è ŸáŸÑ ÿ™ÿ±ŸäÿØ ÿ•ŸäŸÇÿßŸÅ ÿ¨ŸÖŸäÿπ ÿßŸÑÿ£ŸÜÿ∏ŸÖÿ©ÿü')) {
                document.querySelectorAll('input[type="checkbox"]').forEach(cb => cb.checked = false);
                
                // ÿ•ŸäŸÇÿßŸÅ ÿ¨ŸÖŸäÿπ ÿßŸÑÿ•ÿ∂ÿßÿ°ÿßÿ™
                document.getElementById('lightNormalControl').classList.remove('active');
                document.getElementById('lightJaundiceControl').classList.remove('active');
                document.getElementById('lightUVControl').classList.remove('active');
                
                // ÿ•ŸäŸÇÿßŸÅ ÿ¨ŸÖŸäÿπ ÿßŸÑŸÖÿ§ÿ¥ÿ±ÿßÿ™
                document.querySelectorAll('.system-indicator').forEach(ind => {
                    ind.classList.remove('active-system');
                });
                
                // ÿ•ŸäŸÇÿßŸÅ ÿßŸÑŸÖÿ§ŸÇÿ™ÿßÿ™
                stopJaundiceTimer();
                stopUVSterilization();
                
                addAlert('ÿ™ŸÖ ÿ•ŸäŸÇÿßŸÅ ÿ¨ŸÖŸäÿπ ÿßŸÑÿ£ŸÜÿ∏ŸÖÿ© ŸÅŸä Ÿàÿ∂ÿπ ÿßŸÑÿ∑Ÿàÿßÿ±ÿ¶', 'danger');
            }
        }

        function emergencyAlert() {
            alert('üö® ÿ™ŸÜÿ®ŸäŸá ÿ∑Ÿàÿßÿ±ÿ¶!\n\nÿ≥Ÿäÿ™ŸÖ ÿ•ÿÆÿ∑ÿßÿ± ÿßŸÑÿ∑ÿßŸÇŸÖ ÿßŸÑÿ∑ÿ®Ÿä ŸÅŸàÿ±ÿßŸã.\n\nÿ±ŸÇŸÖ ÿßŸÑÿ≠ÿßÿ∂ŸÜÿ©: NICU-001\nÿßŸÑŸàŸÇÿ™: ' + new Date().toLocaleTimeString('ar'));
            addAlert('ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿ™ŸÜÿ®ŸäŸá ÿ∑Ÿàÿßÿ±ÿ¶ ÿ•ŸÑŸâ ÿßŸÑÿ∑ÿßŸÇŸÖ ÿßŸÑÿ∑ÿ®Ÿä', 'danger');
            
            // ŸàŸÖŸäÿ∂ ÿ¥ÿßÿ¥ÿ© ÿßŸÑÿ™ŸÜÿ®ŸäŸá
            document.body.style.animation = 'emergency-flash 0.5s 3';
        }

        // ÿ•ÿ∂ÿßŸÅÿ© ÿ™ŸÜÿ®ŸäŸá ŸÖÿ≠ÿ≥ŸëŸÜ
        function addAlert(message, type = 'info') {
            const alertsList = document.getElementById('alertsList');
            const connectionLog = document.getElementById('connectionLog');
            
            const icons = { 
                'info': '‚ÑπÔ∏è', 
                'warning': '‚ö†Ô∏è', 
                'danger': 'üö®', 
                'success': '‚úÖ' 
            };
            
            const titles = {
                'info': 'ŸÖÿπŸÑŸàŸÖÿ©',
                'warning': 'ÿ™ŸÜÿ®ŸäŸá',
                'danger': 'ÿ™ÿ≠ÿ∞Ÿäÿ±',
                'success': 'ŸÜÿ¨ÿßÿ≠'
            };
            
            const alertDiv = document.createElement('div');
            alertDiv.className = `alert-item alert-${type}`;
            alertDiv.innerHTML = `
                <div class="alert-icon">${icons[type]}</div>
                <div class="alert-content">
                    <strong>${titles[type]}:</strong> ${message}
                </div>
                <div class="alert-time">${new Date().toLocaleTimeString('ar')}</div>
            `;
            
            if (alertsList) {
                alertsList.insertBefore(alertDiv, alertsList.firstChild);
                if (alertsList.children.length > 20) {
                    alertsList.removeChild(alertsList.lastChild);
                }
            }
            
            if (connectionLog) {
                const logClone = alertDiv.cloneNode(true);
                connectionLog.insertBefore(logClone, connectionLog.firstChild);
                if (connectionLog.children.length > 15) {
                    connectionLog.removeChild(connectionLog.lastChild);
                }
            }
            
            // ÿ≠ŸÅÿ∏ ŸÅŸä ŸÇÿßÿπÿØÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™
            if (!localDB.records) localDB.records = [];
            localDB.records.unshift({
                timestamp: new Date(),
                message: message,
                type: type
            });
            
            if (localDB.records.length > 100) {
                localDB.records = localDB.records.slice(0, 100);
            }
            
            saveLocalData();
        }

        function exportData() {
            const data = {
                timestamp: new Date(),
                temperature: document.getElementById('bodyTemp').textContent,
                heartRate: document.getElementById('heartRate').textContent
            };
            
            const dataStr = JSON.stringify(data, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `incubator_data_${Date.now()}.json`;
            link.click();
        }

        function saveSettings() {
            alert('‚úÖ ÿ™ŸÖ ÿ≠ŸÅÿ∏ ÿßŸÑÿ•ÿπÿØÿßÿØÿßÿ™');
            saveLocalData();
        }

        function saveIP() {
            const ip = document.getElementById('wemosIP').value;
            WEMOS_IP = ip;
            localStorage.setItem('wemosIP', ip);
            alert('‚úÖ ÿ™ŸÖ ÿ≠ŸÅÿ∏ ÿπŸÜŸàÿßŸÜ IP');
        }

        console.log('‚úÖ ŸÜÿ∏ÿßŸÖ ÿ≠ÿßÿ∂ŸÜÿ© ÿßŸÑÿ£ÿ∑ŸÅÿßŸÑ ÿßŸÑÿ∞ŸÉŸäÿ© ÿ¨ÿßŸáÿ≤!');
    </script>
</body>
</html>
